!function r(o,a,i){function c(e,t){if(!a[e]){if(!o[e]){var n="function"==typeof require&&require;if(!t&&n)return n(e,!0);if(u)return u(e,!0);throw(t=new Error("Cannot find module '"+e+"'")).code="MODULE_NOT_FOUND",t}n=a[e]={exports:{}},o[e][0].call(n.exports,function(t){return c(o[e][1][t]||t)},n,n.exports,r,o,a,i)}return a[e].exports}for(var u="function"==typeof require&&require,t=0;t<i.length;t++)c(i[t]);return c}({1:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.jwtDecode=n.InvalidTokenError=void 0;class r extends Error{}function o(t){let e=t.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return n=e,decodeURIComponent(atob(n).replace(/(.)/g,(t,e)=>{let n=e.charCodeAt(0).toString(16).toUpperCase();return"%"+(n=n.length<2?"0"+n:n)}))}catch(t){return atob(e)}var n}(n.InvalidTokenError=r).prototype.name="InvalidTokenError",n.jwtDecode=function(t,e){if("string"!=typeof t)throw new r("Invalid token specified: must be a string");if(e=!0===(e=e||{}).header?0:1,"string"!=typeof(t=t.split(".")[e]))throw new r("Invalid token specified: missing part #"+(1+e));let n;try{n=o(t)}catch(t){throw new r(`Invalid token specified: invalid base64 for part #${1+e} (${t.message})`)}try{return JSON.parse(n)}catch(t){throw new r(`Invalid token specified: invalid json for part #${1+e} (${t.message})`)}}},{}],2:[function(t,e,n){"use strict";function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.apiClient=n.ApiResponse=void 0;var l=t("./api.errors.js"),t=(t=t("../config/env.js"))&&t.__esModule?t:{default:t};function f(){var o=p(),t=o.m(f),e=(Object.getPrototypeOf?Object.getPrototypeOf(t):t.__proto__).constructor;function a(t){t="function"==typeof t&&t.constructor;return!!t&&(t===e||"GeneratorFunction"===(t.displayName||t.name))}var n={throw:1,return:2,break:3,continue:3};function i(t){var o,a;return function(r){o||(o={stop:function(){return a(r.a,2)},catch:function(){return r.v},abrupt:function(t,e){return a(r.a,n[t],e)},delegateYield:function(t,e,n){return o.resultName=e,a(r.d,c(t),n)},finish:function(t){return a(r.f,t)}},a=function(t,e,n){r.p=o.prev,r.n=o.next;try{return t(e,n)}finally{o.next=r.n}}),o.resultName&&(o[o.resultName]=r.v,o.resultName=void 0),o.sent=r.v,o.next=r.n;try{return t.call(this,o)}finally{r.p=o.prev,r.n=o.next}}}return(f=function(){return{wrap:function(t,e,n,r){return o.w(i(t),e,n,r&&r.reverse())},isGeneratorFunction:a,mark:o.m,awrap:function(t,e){return new d(t,e)},AsyncIterator:s,async:function(t,e,n,r,o){return(a(e)?u:function(t,e,n,r,o){var a=u(t,e,n,r,o);return a.next().then(function(t){return t.done?t.value:a.next()})})(i(t),e,n,r,o)},keys:r,values:c}})()}function c(t){if(null!=t){var e=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],n=0;if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return{value:(t=t&&n>=t.length?void 0:t)&&t[n++],done:!t}}}}throw new TypeError(o(t)+" is not iterable")}function r(t){var e,n=Object(t),r=[];for(e in n)r.unshift(e);return function t(){for(;r.length;)if((e=r.pop())in n)return t.value=e,t.done=!1,t;return t.done=!0,t}}function u(t,e,n,r,o){return new s(p().w(t,e,n,r),o||Promise)}function s(c,u){var o;this.next||(b(s.prototype),b(s.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),b(this,"_invoke",function(n,t,r){function e(){return new u(function(t,e){!function e(t,n,r,o){try{var a=c[t](n),i=a.value;return i instanceof d?u.resolve(i.v).then(function(t){e("next",t,r,o)},function(t){e("throw",t,r,o)}):u.resolve(i).then(function(t){a.value=t,r(a)},function(t){return e("throw",t,r,o)})}catch(t){o(t)}}(n,r,t,e)})}return o=o?o.then(e,e):e()},!0)}function p(){var h,t="function"==typeof Symbol?Symbol:{},e=t.iterator||"@@iterator",n=t.toStringTag||"@@toStringTag";function r(t,e,n,r){var o,a,i,c,u,s,l,f,p,e=e&&e.prototype instanceof m?e:m,e=Object.create(e.prototype);return b(e,"_invoke",(o=t,a=n,l=r||[],f=!1,p={p:s=0,n:0,v:h,a:d,f:d.bind(h,4),d:function(t,e){return i=t,c=0,u=h,p.n=e,y}},function(t,e,n){if(1<s)throw TypeError("Generator is already running");for(f&&1===e&&d(e,n),c=e,u=n;(v=c<2?h:u)||!f;){i||(c?c<3?(1<c&&(p.n=-1),d(c,u)):p.n=u:p.v=u);try{if(s=2,i){if(v=i[t=c?t:"next"]){if(!(v=v.call(i,u)))throw TypeError("iterator result is not an object");if(!v.done)return v;u=v.value,c<2&&(c=0)}else 1===c&&(v=i.return)&&v.call(i),c<2&&(u=TypeError("The iterator does not provide a '"+t+"' method"),c=1);i=h}else if((v=(f=p.n<0)?u:o.call(a,p))!==y)break}catch(t){i=h,c=1,u=t}finally{s=1}}return{value:v,done:f}}),!0),e;function d(t,e){for(c=t,u=e,v=0;!f&&s&&!n&&v<l.length;v++){var n,r=l[v],o=p.p,a=r[2];3<t?(n=a===e)&&(u=r[(c=r[4])?5:c=3],r[4]=r[5]=h):r[0]<=o&&((n=t<2&&o<r[1])?(c=0,p.v=e,p.n=r[1]):o<a&&(n=t<3||r[0]>e||a<e)&&(r[4]=t,r[5]=e,p.n=a,c=0))}if(n||1<t)return y;throw f=!0,e}}var y={};function m(){}function o(){}function a(){}var v=Object.getPrototypeOf,t=[][e]?v(v([][e]())):(b(v={},e,function(){return this}),v),i=a.prototype=m.prototype=Object.create(t);function c(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,a):(t.__proto__=a,b(t,n,"GeneratorFunction")),t.prototype=Object.create(i),t}return b(i,"constructor",o.prototype=a),b(a,"constructor",o),b(a,n,o.displayName="GeneratorFunction"),b(i),b(i,n,"Generator"),b(i,e,function(){return this}),b(i,"toString",function(){return"[object Generator]"}),(p=function(){return{w:r,m:c}})()}function b(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}(b=function(t,e,n,r){e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:((r=function(e,n){b(t,e,function(t){return this._invoke(e,n,t)})})("next",0),r("throw",1),r("return",2))})(t,e,n,r)}function d(t,e){this.v=t,this.k=e}function h(t,e,n,r,o,a,i){try{var c=t[a](i),u=c.value}catch(t){return n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}function y(c){return function(){var t=this,i=arguments;return new Promise(function(e,n){var r=c.apply(t,i);function o(t){h(r,e,n,o,a,"next",t)}function a(t){h(r,e,n,o,a,"throw",t)}o(void 0)})}}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){t=function(t,e){if("object"!=o(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);n=n.call(t,e||"default");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"==o(t)?t:t+""}(r.key),r)}}function i(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}var m=n.ApiResponse=i(function t(e,n){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,o=this,a=t;if(!(o instanceof a))throw new TypeError("Cannot call a class as a function");this.success=e,this.data=n,this.error=r});n.apiClient={TRANSACTION_BASE_URL:t.default.TRANSACTION_BASE_URL,USERS_BASE_URL:t.default.USERS_BASE_URL,OAUTH_BASE_URL:t.default.OAUTH_BASE_URL,_request:function(i,c){var u=arguments,s=this;return y(f().mark(function t(){var o,e,n,r,a;return f().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return o=2<u.length&&void 0!==u[2]?u[2]:null,r=localStorage.getItem("accessToken"),e=function(){var t=y(f().mark(function t(){var e,n,r;return f().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(console.warn("Access token expired or invalid. Attempting to refresh..."),e=localStorage.getItem("refreshToken")){t.next=6;break}return console.error("No refresh token available. Redirecting to login."),window.location.href="/auth/login.html",t.abrupt("return",new m(!1,null,{code:"NO_REFRESH_TOKEN",message:"No refresh token."}));case 6:return t.prev=6,t.next=9,$.ajax({url:"".concat(s.OAUTH_BASE_URL,"/token/refresh"),method:"POST",contentType:"application/json",data:JSON.stringify({refreshToken:e})});case 9:if((n=t.sent).error)throw new Error(n.error);t.next=12;break;case 12:return r=n.data.accessToken,localStorage.setItem("accessToken",r),console.log("Token refreshed successfully."),t.abrupt("return",s._request(i,c,o));case 18:return t.prev=18,t.t0=t.catch(6),console.error("Failed to refresh token. Redirecting to login.",t.t0),localStorage.clear(),window.location.href="/auth/login.html",t.abrupt("return",new m(!1,null,{code:"AUTH_REFRESH_FAILED",message:l.apiErrorMap.AUTH_REFRESH_FAILED}));case 24:case"end":return t.stop()}},t,null,[[6,18]])}));return function(){return t.apply(this,arguments)}}(),t.prev=3,t.next=6,$.ajax({url:i,method:c,contentType:"application/json",headers:{Authorization:"Bearer ".concat(r),Accept:"application/json","Content-Type":"application/json",SESSID:"asdasdasdasdasd"},data:o?JSON.stringify(o):null});case 6:if((n=t.sent).error)return r=n.error,a=l.apiErrorMap[r]||l.apiErrorMap.DEFAULT,console.error("API Business Error: ".concat(r," - ").concat(a)),t.abrupt("return",new m(!1,null,{code:r,message:a}));t.next=12;break;case 12:return t.abrupt("return",new m(!0,n.data,null));case 15:if(t.prev=15,t.t0=t.catch(3),401===t.t0.status)return t.next=20,e();t.next=21;break;case 20:return t.abrupt("return",t.sent);case 21:return a="HTTP Error ".concat(t.t0.status,": ").concat(t.t0.statusText),console.error(a,t.t0.responseJSON),t.abrupt("return",new m(!1,null,{code:"HTTP_".concat(t.t0.status),message:a}));case 24:case"end":return t.stop()}},t,null,[[3,15]])}))()},get:function(t){return this._request(t,"GET")},post:function(t,e){return this._request(t,"POST",e)},put:function(t,e){return this._request(t,"PUT",e)},delete:function(t){return this._request(t,"DELETE")}}},{"../config/env.js":4,"./api.errors.js":3}],3:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.apiErrorMap=void 0;n.apiErrorMap={PAAS_INC_DATA_001:"Inconsistent data was found. Please contact support.",PAAS_INC_DATA_002:"The specified account could not be found.",PAAS_INC_DATA_003:"The account configuration is missing. Please set up your account.",PAAS_ACC_VAL_004:"The maximum number of customers has been exceeded for this account.",AUTH_TOKEN_EXPIRED:"Your session has expired. Please log in again.",AUTH_REFRESH_FAILED:"Your session could not be renewed. Please log in again.",DEFAULT:"An unexpected error occurred. Please try again later."}},{}],4:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;n.default={TRANSACTION_BASE_URL:"https://revamp-transaction.undostres.com.mx/api/v1/paas/admin",USERS_BASE_URL:"https://revamp-users.undostres.com.mx/api/v1/paas/admin",OAUTH_BASE_URL:"https://revamp-oauth.undostres.com.mx/api/v1/paas/admin"}},{}],5:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.fileUtils=void 0;n.fileUtils={downloadFile:function(t,e,n){t=new Blob([t],{type:n}),n=URL.createObjectURL(t),t=document.createElement("a");t.href=n,t.download=e,document.body.appendChild(t),t.click(),document.body.removeChild(t),URL.revokeObjectURL(n)}}},{}],6:[function(t,e,n){"use strict";t("./modules/spei/index"),t("./modules/auth/index"),t("./modules/home/index"),t("./modules/customer/index"),t("./modules/checkout/index"),console.log("✅ Main application entry point (main.js) loaded.")},{"./modules/auth/index":9,"./modules/checkout/index":14,"./modules/customer/index":21,"./modules/home/index":28,"./modules/spei/index":34}],7:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.authApi=void 0;var r=t("../../../core/api/api.client.js");n.authApi={login:function(t,e){t=btoa("".concat(t,":").concat(e));return $.ajax({url:"".concat(r.apiClient.OAUTH_BASE_URL,"/login"),method:"POST",headers:{Authorization:"Basic ".concat(t)}})},refresh:function(t){return $.ajax({url:"".concat(r.apiClient.OAUTH_BASE_URL,"/token/refresh"),method:"POST",headers:{Authorization:"Bearer ".concat(t)}})}}},{"../../../core/api/api.client.js":2}],8:[function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.authService=void 0;var a=t("../data/auth.api.js"),i=t("jwt-decode"),o=t("../models/user-profile.model.js");function c(){var o=p(),t=o.m(c),e=(Object.getPrototypeOf?Object.getPrototypeOf(t):t.__proto__).constructor;function a(t){t="function"==typeof t&&t.constructor;return!!t&&(t===e||"GeneratorFunction"===(t.displayName||t.name))}var n={throw:1,return:2,break:3,continue:3};function i(t){var o,a;return function(r){o||(o={stop:function(){return a(r.a,2)},catch:function(){return r.v},abrupt:function(t,e){return a(r.a,n[t],e)},delegateYield:function(t,e,n){return o.resultName=e,a(r.d,u(t),n)},finish:function(t){return a(r.f,t)}},a=function(t,e,n){r.p=o.prev,r.n=o.next;try{return t(e,n)}finally{o.next=r.n}}),o.resultName&&(o[o.resultName]=r.v,o.resultName=void 0),o.sent=r.v,o.next=r.n;try{return t.call(this,o)}finally{r.p=o.prev,r.n=o.next}}}return(c=function(){return{wrap:function(t,e,n,r){return o.w(i(t),e,n,r&&r.reverse())},isGeneratorFunction:a,mark:o.m,awrap:function(t,e){return new d(t,e)},AsyncIterator:f,async:function(t,e,n,r,o){return(a(e)?l:function(t,e,n,r,o){var a=l(t,e,n,r,o);return a.next().then(function(t){return t.done?t.value:a.next()})})(i(t),e,n,r,o)},keys:s,values:u}})()}function u(t){if(null!=t){var e=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],n=0;if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return{value:(t=t&&n>=t.length?void 0:t)&&t[n++],done:!t}}}}throw new TypeError(r(t)+" is not iterable")}function s(t){var e,n=Object(t),r=[];for(e in n)r.unshift(e);return function t(){for(;r.length;)if((e=r.pop())in n)return t.value=e,t.done=!1,t;return t.done=!0,t}}function l(t,e,n,r,o){return new f(p().w(t,e,n,r),o||Promise)}function f(c,u){var o;this.next||(b(f.prototype),b(f.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),b(this,"_invoke",function(n,t,r){function e(){return new u(function(t,e){!function e(t,n,r,o){try{var a=c[t](n),i=a.value;return i instanceof d?u.resolve(i.v).then(function(t){e("next",t,r,o)},function(t){e("throw",t,r,o)}):u.resolve(i).then(function(t){a.value=t,r(a)},function(t){return e("throw",t,r,o)})}catch(t){o(t)}}(n,r,t,e)})}return o=o?o.then(e,e):e()},!0)}function p(){var h,t="function"==typeof Symbol?Symbol:{},e=t.iterator||"@@iterator",n=t.toStringTag||"@@toStringTag";function r(t,e,n,r){var o,a,i,c,u,s,l,f,p,e=e&&e.prototype instanceof m?e:m,e=Object.create(e.prototype);return b(e,"_invoke",(o=t,a=n,l=r||[],f=!1,p={p:s=0,n:0,v:h,a:d,f:d.bind(h,4),d:function(t,e){return i=t,c=0,u=h,p.n=e,y}},function(t,e,n){if(1<s)throw TypeError("Generator is already running");for(f&&1===e&&d(e,n),c=e,u=n;(v=c<2?h:u)||!f;){i||(c?c<3?(1<c&&(p.n=-1),d(c,u)):p.n=u:p.v=u);try{if(s=2,i){if(v=i[t=c?t:"next"]){if(!(v=v.call(i,u)))throw TypeError("iterator result is not an object");if(!v.done)return v;u=v.value,c<2&&(c=0)}else 1===c&&(v=i.return)&&v.call(i),c<2&&(u=TypeError("The iterator does not provide a '"+t+"' method"),c=1);i=h}else if((v=(f=p.n<0)?u:o.call(a,p))!==y)break}catch(t){i=h,c=1,u=t}finally{s=1}}return{value:v,done:f}}),!0),e;function d(t,e){for(c=t,u=e,v=0;!f&&s&&!n&&v<l.length;v++){var n,r=l[v],o=p.p,a=r[2];3<t?(n=a===e)&&(u=r[(c=r[4])?5:c=3],r[4]=r[5]=h):r[0]<=o&&((n=t<2&&o<r[1])?(c=0,p.v=e,p.n=r[1]):o<a&&(n=t<3||r[0]>e||a<e)&&(r[4]=t,r[5]=e,p.n=a,c=0))}if(n||1<t)return y;throw f=!0,e}}var y={};function m(){}function o(){}function a(){}var v=Object.getPrototypeOf,t=[][e]?v(v([][e]())):(b(v={},e,function(){return this}),v),i=a.prototype=m.prototype=Object.create(t);function c(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,a):(t.__proto__=a,b(t,n,"GeneratorFunction")),t.prototype=Object.create(i),t}return b(i,"constructor",o.prototype=a),b(a,"constructor",o),b(a,n,o.displayName="GeneratorFunction"),b(i),b(i,n,"Generator"),b(i,e,function(){return this}),b(i,"toString",function(){return"[object Generator]"}),(p=function(){return{w:r,m:c}})()}function b(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}(b=function(t,e,n,r){e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:((r=function(e,n){b(t,e,function(t){return this._invoke(e,n,t)})})("next",0),r("throw",1),r("return",2))})(t,e,n,r)}function d(t,e){this.v=t,this.k=e}function h(t,e,n,r,o,a,i){try{var c=t[a](i),u=c.value}catch(t){return n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}var y,m,v="userProfile";n.authService={login:(y=c().mark(function t(e,n){var r,o;return c().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,a.authApi.login(e,n);case 3:if(r=t.sent,console.log(r),r&&r.data&&"SUCCESS"===r.message)return localStorage.setItem("accessToken",r.data.accessToken),localStorage.setItem("refreshToken",r.data.refreshToken),o={name:r.data.name,email:r.data.email,active:r.data.active,roles:r.data.roles},localStorage.setItem(v,JSON.stringify(o)),t.abrupt("return",!0);t.next=11;break;case 11:return console.error("Login failed:",(null==r?void 0:r.error)||"Unknown error"),t.abrupt("return",!1);case 15:if(t.prev=15,t.t0=t.catch(0),console.error("Login API call failed:",t.t0),401===t.t0.status)return t.abrupt("return",!1);t.next=20;break;case 20:return t.abrupt("return",!1);case 21:case"end":return t.stop()}},t,null,[[0,15]])}),m=function(){var t=this,i=arguments;return new Promise(function(e,n){var r=y.apply(t,i);function o(t){h(r,e,n,o,a,"next",t)}function a(t){h(r,e,n,o,a,"throw",t)}o(void 0)})},function(t,e){return m.apply(this,arguments)}),logout:function(){localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),localStorage.removeItem("dashboardSummaryCache"),localStorage.removeItem(v),window.location.href="/auth/login.html"},getUserProfile:function(){var t=localStorage.getItem(v);if(!t)return null;try{var e=JSON.parse(t);return new o.UserProfile(e)}catch(t){return console.error("Error parsing user profile from localStorage:",t),this.logout(),null}},isAuthenticated:function(){console.log("Checking authentication status.");var t=localStorage.getItem("accessToken"),e=localStorage.getItem("refreshToken"),n=localStorage.getItem(v);if(!t||!e||!n)return console.log("No access or refresh token found."),this.logout(),!1;try{console.log("Tokens to decode:",e);var r=(0,i.jwtDecode)(e),o=Date.now()/1e3;return r.exp<o?(console.log("Refresh token expired. User is not authenticated."),this.logout(),!1):(console.log("Access and refresh tokens found and refresh token is valid."),!0)}catch(t){return console.error("Error decoding refresh token or invalid token format:",t),this.logout(),!1}}}},{"../data/auth.api.js":7,"../models/user-profile.model.js":10,"jwt-decode":1}],9:[function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var s=t("./domain/auth.service.js");function l(){var o=d(),t=o.m(l),e=(Object.getPrototypeOf?Object.getPrototypeOf(t):t.__proto__).constructor;function a(t){t="function"==typeof t&&t.constructor;return!!t&&(t===e||"GeneratorFunction"===(t.displayName||t.name))}var n={throw:1,return:2,break:3,continue:3};function i(t){var o,a;return function(r){o||(o={stop:function(){return a(r.a,2)},catch:function(){return r.v},abrupt:function(t,e){return a(r.a,n[t],e)},delegateYield:function(t,e,n){return o.resultName=e,a(r.d,c(t),n)},finish:function(t){return a(r.f,t)}},a=function(t,e,n){r.p=o.prev,r.n=o.next;try{return t(e,n)}finally{o.next=r.n}}),o.resultName&&(o[o.resultName]=r.v,o.resultName=void 0),o.sent=r.v,o.next=r.n;try{return t.call(this,o)}finally{r.p=o.prev,r.n=o.next}}}return(l=function(){return{wrap:function(t,e,n,r){return o.w(i(t),e,n,r&&r.reverse())},isGeneratorFunction:a,mark:o.m,awrap:function(t,e){return new h(t,e)},AsyncIterator:p,async:function(t,e,n,r,o){return(a(e)?f:function(t,e,n,r,o){var a=f(t,e,n,r,o);return a.next().then(function(t){return t.done?t.value:a.next()})})(i(t),e,n,r,o)},keys:u,values:c}})()}function c(t){if(null!=t){var e=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],n=0;if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return{value:(t=t&&n>=t.length?void 0:t)&&t[n++],done:!t}}}}throw new TypeError(r(t)+" is not iterable")}function u(t){var e,n=Object(t),r=[];for(e in n)r.unshift(e);return function t(){for(;r.length;)if((e=r.pop())in n)return t.value=e,t.done=!1,t;return t.done=!0,t}}function f(t,e,n,r,o){return new p(d().w(t,e,n,r),o||Promise)}function p(c,u){var o;this.next||(b(p.prototype),b(p.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),b(this,"_invoke",function(n,t,r){function e(){return new u(function(t,e){!function e(t,n,r,o){try{var a=c[t](n),i=a.value;return i instanceof h?u.resolve(i.v).then(function(t){e("next",t,r,o)},function(t){e("throw",t,r,o)}):u.resolve(i).then(function(t){a.value=t,r(a)},function(t){return e("throw",t,r,o)})}catch(t){o(t)}}(n,r,t,e)})}return o=o?o.then(e,e):e()},!0)}function d(){var h,t="function"==typeof Symbol?Symbol:{},e=t.iterator||"@@iterator",n=t.toStringTag||"@@toStringTag";function r(t,e,n,r){var o,a,i,c,u,s,l,f,p,e=e&&e.prototype instanceof m?e:m,e=Object.create(e.prototype);return b(e,"_invoke",(o=t,a=n,l=r||[],f=!1,p={p:s=0,n:0,v:h,a:d,f:d.bind(h,4),d:function(t,e){return i=t,c=0,u=h,p.n=e,y}},function(t,e,n){if(1<s)throw TypeError("Generator is already running");for(f&&1===e&&d(e,n),c=e,u=n;(v=c<2?h:u)||!f;){i||(c?c<3?(1<c&&(p.n=-1),d(c,u)):p.n=u:p.v=u);try{if(s=2,i){if(v=i[t=c?t:"next"]){if(!(v=v.call(i,u)))throw TypeError("iterator result is not an object");if(!v.done)return v;u=v.value,c<2&&(c=0)}else 1===c&&(v=i.return)&&v.call(i),c<2&&(u=TypeError("The iterator does not provide a '"+t+"' method"),c=1);i=h}else if((v=(f=p.n<0)?u:o.call(a,p))!==y)break}catch(t){i=h,c=1,u=t}finally{s=1}}return{value:v,done:f}}),!0),e;function d(t,e){for(c=t,u=e,v=0;!f&&s&&!n&&v<l.length;v++){var n,r=l[v],o=p.p,a=r[2];3<t?(n=a===e)&&(u=r[(c=r[4])?5:c=3],r[4]=r[5]=h):r[0]<=o&&((n=t<2&&o<r[1])?(c=0,p.v=e,p.n=r[1]):o<a&&(n=t<3||r[0]>e||a<e)&&(r[4]=t,r[5]=e,p.n=a,c=0))}if(n||1<t)return y;throw f=!0,e}}var y={};function m(){}function o(){}function a(){}var v=Object.getPrototypeOf,t=[][e]?v(v([][e]())):(b(v={},e,function(){return this}),v),i=a.prototype=m.prototype=Object.create(t);function c(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,a):(t.__proto__=a,b(t,n,"GeneratorFunction")),t.prototype=Object.create(i),t}return b(i,"constructor",o.prototype=a),b(a,"constructor",o),b(a,n,o.displayName="GeneratorFunction"),b(i),b(i,n,"Generator"),b(i,e,function(){return this}),b(i,"toString",function(){return"[object Generator]"}),(d=function(){return{w:r,m:c}})()}function b(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}(b=function(t,e,n,r){e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:((r=function(e,n){b(t,e,function(t){return this._invoke(e,n,t)})})("next",0),r("throw",1),r("return",2))})(t,e,n,r)}function h(t,e){this.v=t,this.k=e}function y(t,e,n,r,o,a,i){try{var c=t[a](i),u=c.value}catch(t){return n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}$(document).ready(function(){var i,u,t,e;window.location.pathname.includes("auth/login.html")||s.authService.isAuthenticated()?0<(e=$("#login-form")).length?($("[data-password]").on("click",function(){"false"==$(this).attr("data-password")?($(this).attr("data-password","true"),$(this).closest(".input-group-merge").find("input").attr("type","text")):($(this).attr("data-password","false"),$(this).closest(".input-group-merge").find("input").attr("type","password"))}),i=$("#email"),u=$("#checkbox-signin"),(t=localStorage.getItem("rememberedEmail"))&&(i.val(t),u.prop("checked",!0)),e.on("submit",function(){c=l().mark(function t(e){var n,r,o,a;return l().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.preventDefault(),u.is(":checked")?localStorage.setItem("rememberedEmail",i.val()):localStorage.removeItem("rememberedEmail"),n=$("#email").val(),r=$("#password").val(),o=$("#login-error-alert"),(a=$("#login-submit-button")).prop("disabled",!0).html('<span class="spinner-border spinner-border-sm me-1" role="status" aria-hidden="true"></span> Logging In...'),o.hide().text(""),t.next=10,s.authService.login(n,r);case 10:t.sent?window.location.href="/index.html":(o.text("Login failed. Please check your credentials or try again later.").show(),a.prop("disabled",!1).text("Log In"));case 12:case"end":return t.stop()}},t)});var c,e=function(){var t=this,i=arguments;return new Promise(function(e,n){var r=c.apply(t,i);function o(t){y(r,e,n,o,a,"next",t)}function a(t){y(r,e,n,o,a,"throw",t)}o(void 0)})};return function(t){return e.apply(this,arguments)}}())):(0<(t=$("#logout-btn")).length&&t.on("click",function(t){t.preventDefault(),s.authService.logout()}),0<(e=$("#logout-btn-profile")).length&&e.on("click",function(t){console.log("logout button clicked."),t.preventDefault(),s.authService.logout()})):(console.log("not loged in making redirection."),s.authService.logout())})},{"./domain/auth.service.js":8}],10:[function(t,e,n){"use strict";function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){t=function(t,e){if("object"!=o(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);n=n.call(t,e||"default");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"==o(t)?t:t+""}(r.key),r)}}Object.defineProperty(n,"__esModule",{value:!0}),n.UserProfile=void 0;n.UserProfile=function(){function o(t){var e=t.name,n=t.email,r=t.active,t=t.roles;if(!(this instanceof o))throw new TypeError("Cannot call a class as a function");this.name=e,this.email=n,this.active=r,this.roles=t||[]}return t=o,(e=[{key:"hasRole",value:function(t){return this.roles.includes(t.toUpperCase())}},{key:"isAdmin",value:function(){return this.hasRole("ADMIN")}},{key:"getFullName",value:function(){return this.name}}])&&r(t.prototype,e),n&&r(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n}()},{}],11:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.checkoutApi=void 0;var i=t("../../../core/api/api.client.js");n.checkoutApi={getCatalog:function(t){var e=t.page,t=t.pageSize,e=(null==e&&(e=0),null==t&&(t=10),new URLSearchParams({page:e,page_size:t})),t="".concat(i.apiClient.TRANSACTION_BASE_URL,"/checkout/catalog?").concat(e.toString());return i.apiClient.get(t)},getOrders:function(t){var e,n=t.page,r=t.pageSize,o=t.filters,a=(null==n&&(n=0),null==r&&(r=10),new URLSearchParams({page:n,page_size:r}));for(e in o)o[e]&&a.append(e,o[e]);t="".concat(i.apiClient.TRANSACTION_BASE_URL,"/checkout/orders?").concat(a.toString());return i.apiClient.get(t)},getTransactionById:function(t){console.log("Fetching transaction details for ID:",t);t="".concat(i.apiClient.TRANSACTION_BASE_URL,"/spei/transaction/").concat(t);return console.log("Constructed endpoint:",t),i.apiClient.get(t)}}},{"../../../core/api/api.client.js":2}],12:[function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.checkoutRepository=void 0;var o=t("./checkout.api.js"),a=t("../models/checkout-catalog.model"),i=t("../models/checkout-order.model");function c(){var o=p(),t=o.m(c),e=(Object.getPrototypeOf?Object.getPrototypeOf(t):t.__proto__).constructor;function a(t){t="function"==typeof t&&t.constructor;return!!t&&(t===e||"GeneratorFunction"===(t.displayName||t.name))}var n={throw:1,return:2,break:3,continue:3};function i(t){var o,a;return function(r){o||(o={stop:function(){return a(r.a,2)},catch:function(){return r.v},abrupt:function(t,e){return a(r.a,n[t],e)},delegateYield:function(t,e,n){return o.resultName=e,a(r.d,u(t),n)},finish:function(t){return a(r.f,t)}},a=function(t,e,n){r.p=o.prev,r.n=o.next;try{return t(e,n)}finally{o.next=r.n}}),o.resultName&&(o[o.resultName]=r.v,o.resultName=void 0),o.sent=r.v,o.next=r.n;try{return t.call(this,o)}finally{r.p=o.prev,r.n=o.next}}}return(c=function(){return{wrap:function(t,e,n,r){return o.w(i(t),e,n,r&&r.reverse())},isGeneratorFunction:a,mark:o.m,awrap:function(t,e){return new d(t,e)},AsyncIterator:f,async:function(t,e,n,r,o){return(a(e)?l:function(t,e,n,r,o){var a=l(t,e,n,r,o);return a.next().then(function(t){return t.done?t.value:a.next()})})(i(t),e,n,r,o)},keys:s,values:u}})()}function u(t){if(null!=t){var e=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],n=0;if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return{value:(t=t&&n>=t.length?void 0:t)&&t[n++],done:!t}}}}throw new TypeError(r(t)+" is not iterable")}function s(t){var e,n=Object(t),r=[];for(e in n)r.unshift(e);return function t(){for(;r.length;)if((e=r.pop())in n)return t.value=e,t.done=!1,t;return t.done=!0,t}}function l(t,e,n,r,o){return new f(p().w(t,e,n,r),o||Promise)}function f(c,u){var o;this.next||(b(f.prototype),b(f.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),b(this,"_invoke",function(n,t,r){function e(){return new u(function(t,e){!function e(t,n,r,o){try{var a=c[t](n),i=a.value;return i instanceof d?u.resolve(i.v).then(function(t){e("next",t,r,o)},function(t){e("throw",t,r,o)}):u.resolve(i).then(function(t){a.value=t,r(a)},function(t){return e("throw",t,r,o)})}catch(t){o(t)}}(n,r,t,e)})}return o=o?o.then(e,e):e()},!0)}function p(){var h,t="function"==typeof Symbol?Symbol:{},e=t.iterator||"@@iterator",n=t.toStringTag||"@@toStringTag";function r(t,e,n,r){var o,a,i,c,u,s,l,f,p,e=e&&e.prototype instanceof m?e:m,e=Object.create(e.prototype);return b(e,"_invoke",(o=t,a=n,l=r||[],f=!1,p={p:s=0,n:0,v:h,a:d,f:d.bind(h,4),d:function(t,e){return i=t,c=0,u=h,p.n=e,y}},function(t,e,n){if(1<s)throw TypeError("Generator is already running");for(f&&1===e&&d(e,n),c=e,u=n;(v=c<2?h:u)||!f;){i||(c?c<3?(1<c&&(p.n=-1),d(c,u)):p.n=u:p.v=u);try{if(s=2,i){if(v=i[t=c?t:"next"]){if(!(v=v.call(i,u)))throw TypeError("iterator result is not an object");if(!v.done)return v;u=v.value,c<2&&(c=0)}else 1===c&&(v=i.return)&&v.call(i),c<2&&(u=TypeError("The iterator does not provide a '"+t+"' method"),c=1);i=h}else if((v=(f=p.n<0)?u:o.call(a,p))!==y)break}catch(t){i=h,c=1,u=t}finally{s=1}}return{value:v,done:f}}),!0),e;function d(t,e){for(c=t,u=e,v=0;!f&&s&&!n&&v<l.length;v++){var n,r=l[v],o=p.p,a=r[2];3<t?(n=a===e)&&(u=r[(c=r[4])?5:c=3],r[4]=r[5]=h):r[0]<=o&&((n=t<2&&o<r[1])?(c=0,p.v=e,p.n=r[1]):o<a&&(n=t<3||r[0]>e||a<e)&&(r[4]=t,r[5]=e,p.n=a,c=0))}if(n||1<t)return y;throw f=!0,e}}var y={};function m(){}function o(){}function a(){}var v=Object.getPrototypeOf,t=[][e]?v(v([][e]())):(b(v={},e,function(){return this}),v),i=a.prototype=m.prototype=Object.create(t);function c(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,a):(t.__proto__=a,b(t,n,"GeneratorFunction")),t.prototype=Object.create(i),t}return b(i,"constructor",o.prototype=a),b(a,"constructor",o),b(a,n,o.displayName="GeneratorFunction"),b(i),b(i,n,"Generator"),b(i,e,function(){return this}),b(i,"toString",function(){return"[object Generator]"}),(p=function(){return{w:r,m:c}})()}function b(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}(b=function(t,e,n,r){e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:((r=function(e,n){b(t,e,function(t){return this._invoke(e,n,t)})})("next",0),r("throw",1),r("return",2))})(t,e,n,r)}function d(t,e){this.v=t,this.k=e}function h(t,e,n,r,o,a,i){try{var c=t[a](i),u=c.value}catch(t){return n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}function y(c){return function(){var t=this,i=arguments;return new Promise(function(e,n){var r=c.apply(t,i);function o(t){h(r,e,n,o,a,"next",t)}function a(t){h(r,e,n,o,a,"throw",t)}o(void 0)})}}var m,v;n.checkoutRepository={getCatalog:(v=y(c().mark(function t(e){var n;return c().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.checkoutApi.getCatalog(e);case 2:if((n=t.sent).success&&n.data&&Array.isArray(n.data))return t.abrupt("return",n.data.map(function(t){return new a.CheckoutCatalog(t)}));t.next=7;break;case 7:return n.success?console.error("API response.data is not in the expected array format:",n.data):console.error("Failed to retrieve catalogs from repository:",n.error.message),t.abrupt("return",[]);case 9:case"end":return t.stop()}},t)})),function(t){return v.apply(this,arguments)}),getOrders:(m=y(c().mark(function t(e){var n;return c().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.checkoutApi.getOrders(e);case 2:if((n=t.sent).success&&n.data&&Array.isArray(n.data))return t.abrupt("return",n.data.map(function(t){return new i.CheckoutOrder(t)}));t.next=7;break;case 7:return n.success?console.error("API response.data is not in the expected array format:",n.data):console.error("Failed to retrieve orders from repository:",n.error.message),t.abrupt("return",[]);case 9:case"end":return t.stop()}},t)})),function(t){return m.apply(this,arguments)})}},{"../models/checkout-catalog.model":15,"../models/checkout-order.model":16,"./checkout.api.js":11}],13:[function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.checkoutService=void 0;var o=t("../data/checkout.repository.js");function a(t){return function(t){if(Array.isArray(t))return i(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){{var n;if(t)return"string"==typeof t?i(t,e):"Map"===(n="Object"===(n={}.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:n)||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function c(){var o=p(),t=o.m(c),e=(Object.getPrototypeOf?Object.getPrototypeOf(t):t.__proto__).constructor;function a(t){t="function"==typeof t&&t.constructor;return!!t&&(t===e||"GeneratorFunction"===(t.displayName||t.name))}var n={throw:1,return:2,break:3,continue:3};function i(t){var o,a;return function(r){o||(o={stop:function(){return a(r.a,2)},catch:function(){return r.v},abrupt:function(t,e){return a(r.a,n[t],e)},delegateYield:function(t,e,n){return o.resultName=e,a(r.d,u(t),n)},finish:function(t){return a(r.f,t)}},a=function(t,e,n){r.p=o.prev,r.n=o.next;try{return t(e,n)}finally{o.next=r.n}}),o.resultName&&(o[o.resultName]=r.v,o.resultName=void 0),o.sent=r.v,o.next=r.n;try{return t.call(this,o)}finally{r.p=o.prev,r.n=o.next}}}return(c=function(){return{wrap:function(t,e,n,r){return o.w(i(t),e,n,r&&r.reverse())},isGeneratorFunction:a,mark:o.m,awrap:function(t,e){return new d(t,e)},AsyncIterator:f,async:function(t,e,n,r,o){return(a(e)?l:function(t,e,n,r,o){var a=l(t,e,n,r,o);return a.next().then(function(t){return t.done?t.value:a.next()})})(i(t),e,n,r,o)},keys:s,values:u}})()}function u(t){if(null!=t){var e=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],n=0;if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return{value:(t=t&&n>=t.length?void 0:t)&&t[n++],done:!t}}}}throw new TypeError(r(t)+" is not iterable")}function s(t){var e,n=Object(t),r=[];for(e in n)r.unshift(e);return function t(){for(;r.length;)if((e=r.pop())in n)return t.value=e,t.done=!1,t;return t.done=!0,t}}function l(t,e,n,r,o){return new f(p().w(t,e,n,r),o||Promise)}function f(c,u){var o;this.next||(b(f.prototype),b(f.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),b(this,"_invoke",function(n,t,r){function e(){return new u(function(t,e){!function e(t,n,r,o){try{var a=c[t](n),i=a.value;return i instanceof d?u.resolve(i.v).then(function(t){e("next",t,r,o)},function(t){e("throw",t,r,o)}):u.resolve(i).then(function(t){a.value=t,r(a)},function(t){return e("throw",t,r,o)})}catch(t){o(t)}}(n,r,t,e)})}return o=o?o.then(e,e):e()},!0)}function p(){var h,t="function"==typeof Symbol?Symbol:{},e=t.iterator||"@@iterator",n=t.toStringTag||"@@toStringTag";function r(t,e,n,r){var o,a,i,c,u,s,l,f,p,e=e&&e.prototype instanceof m?e:m,e=Object.create(e.prototype);return b(e,"_invoke",(o=t,a=n,l=r||[],f=!1,p={p:s=0,n:0,v:h,a:d,f:d.bind(h,4),d:function(t,e){return i=t,c=0,u=h,p.n=e,y}},function(t,e,n){if(1<s)throw TypeError("Generator is already running");for(f&&1===e&&d(e,n),c=e,u=n;(v=c<2?h:u)||!f;){i||(c?c<3?(1<c&&(p.n=-1),d(c,u)):p.n=u:p.v=u);try{if(s=2,i){if(v=i[t=c?t:"next"]){if(!(v=v.call(i,u)))throw TypeError("iterator result is not an object");if(!v.done)return v;u=v.value,c<2&&(c=0)}else 1===c&&(v=i.return)&&v.call(i),c<2&&(u=TypeError("The iterator does not provide a '"+t+"' method"),c=1);i=h}else if((v=(f=p.n<0)?u:o.call(a,p))!==y)break}catch(t){i=h,c=1,u=t}finally{s=1}}return{value:v,done:f}}),!0),e;function d(t,e){for(c=t,u=e,v=0;!f&&s&&!n&&v<l.length;v++){var n,r=l[v],o=p.p,a=r[2];3<t?(n=a===e)&&(u=r[(c=r[4])?5:c=3],r[4]=r[5]=h):r[0]<=o&&((n=t<2&&o<r[1])?(c=0,p.v=e,p.n=r[1]):o<a&&(n=t<3||r[0]>e||a<e)&&(r[4]=t,r[5]=e,p.n=a,c=0))}if(n||1<t)return y;throw f=!0,e}}var y={};function m(){}function o(){}function a(){}var v=Object.getPrototypeOf,t=[][e]?v(v([][e]())):(b(v={},e,function(){return this}),v),i=a.prototype=m.prototype=Object.create(t);function c(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,a):(t.__proto__=a,b(t,n,"GeneratorFunction")),t.prototype=Object.create(i),t}return b(i,"constructor",o.prototype=a),b(a,"constructor",o),b(a,n,o.displayName="GeneratorFunction"),b(i),b(i,n,"Generator"),b(i,e,function(){return this}),b(i,"toString",function(){return"[object Generator]"}),(p=function(){return{w:r,m:c}})()}function b(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}(b=function(t,e,n,r){e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:((r=function(e,n){b(t,e,function(t){return this._invoke(e,n,t)})})("next",0),r("throw",1),r("return",2))})(t,e,n,r)}function d(t,e){this.v=t,this.k=e}function h(t,e,n,r,o,a,i){try{var c=t[a](i),u=c.value}catch(t){return n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}function y(c){return function(){var t=this,i=arguments;return new Promise(function(e,n){var r=c.apply(t,i);function o(t){h(r,e,n,o,a,"next",t)}function a(t){h(r,e,n,o,a,"throw",t)}o(void 0)})}}var m,v,g,w;n.checkoutService={getCatalog:(w=y(c().mark(function t(e){return c().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.checkoutRepository.getCatalog(e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t)})),function(t){return w.apply(this,arguments)}),getOrders:(g=y(c().mark(function t(e){return c().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.checkoutRepository.getOrders(e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t)})),function(t){return g.apply(this,arguments)}),sortData:function(t,n,r){t=a(t);return t.sort(function(t,e){t=t[n],e=e[n];return"string"==typeof t&&(t=t.toLowerCase(),e=e.toLowerCase()),t<e?"asc"===r?-1:1:e<t?"asc"===r?1:-1:0}),t},exportCatalogToCsv:(v=y(c().mark(function t(e){return c().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this._convertCatalogToCsv(e));case 1:case"end":return t.stop()}},t,this)})),function(t){return v.apply(this,arguments)}),_convertCatalogToCsv:function(t){var n,r;return t&&0!==t.length?(n=["operatorId","skuId","title","amount"],r=["Operator Id","Sku ID","Title","Amount"].join(",")+"\n",t.forEach(function(e){var t=n.map(function(t){t=e[t];return t instanceof Date?t=t.toLocaleString():"number"==typeof t?t=t.toFixed(2):null==t?t="":((t=String(t).replace(/"/g,'""')).includes(",")||t.includes("\n"))&&(t='"'.concat(t,'"')),t});r+=t.join(",")+"\n"}),r):"No data to export."},exportOrdersToCsv:(m=y(c().mark(function t(e){return c().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this._convertOrdersToCsv(e));case 1:case"end":return t.stop()}},t,this)})),function(t){return m.apply(this,arguments)}),_convertOrdersToCsv:function(t){var n,r;return t&&0!==t.length?(n=["token","operatorId","skuId","amount","reference","externalReference","customerId","status","createdAt","description"],r=["Token","Operator Id","Sku ID","Amount","Reference","External Reference","Customer ID","Status","Created At","Description"].join(",")+"\n",t.forEach(function(e){var t=n.map(function(t){t=e[t];return t instanceof Date?t=t.toLocaleString():"number"==typeof t?t=t.toFixed(2):null==t?t="":((t=String(t).replace(/"/g,'""')).includes(",")||t.includes("\n"))&&(t='"'.concat(t,'"')),t});r+=t.join(",")+"\n"}),r):"No data to export."}}},{"../data/checkout.repository.js":12}],14:[function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var y=t("./domain/checkout.service.js"),m=t("./ui/checkout.ui.js"),v=t("../../core/utils/file.utils");function b(t){return function(t){if(Array.isArray(t))return o(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){{var n;if(t)return"string"==typeof t?o(t,e):"Map"===(n="Object"===(n={}.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:n)||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function g(){var o=f(),t=o.m(g),e=(Object.getPrototypeOf?Object.getPrototypeOf(t):t.__proto__).constructor;function a(t){t="function"==typeof t&&t.constructor;return!!t&&(t===e||"GeneratorFunction"===(t.displayName||t.name))}var n={throw:1,return:2,break:3,continue:3};function i(t){var o,a;return function(r){o||(o={stop:function(){return a(r.a,2)},catch:function(){return r.v},abrupt:function(t,e){return a(r.a,n[t],e)},delegateYield:function(t,e,n){return o.resultName=e,a(r.d,c(t),n)},finish:function(t){return a(r.f,t)}},a=function(t,e,n){r.p=o.prev,r.n=o.next;try{return t(e,n)}finally{o.next=r.n}}),o.resultName&&(o[o.resultName]=r.v,o.resultName=void 0),o.sent=r.v,o.next=r.n;try{return t.call(this,o)}finally{r.p=o.prev,r.n=o.next}}}return(g=function(){return{wrap:function(t,e,n,r){return o.w(i(t),e,n,r&&r.reverse())},isGeneratorFunction:a,mark:o.m,awrap:function(t,e){return new p(t,e)},AsyncIterator:l,async:function(t,e,n,r,o){return(a(e)?s:function(t,e,n,r,o){var a=s(t,e,n,r,o);return a.next().then(function(t){return t.done?t.value:a.next()})})(i(t),e,n,r,o)},keys:u,values:c}})()}function c(t){if(null!=t){var e=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],n=0;if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return{value:(t=t&&n>=t.length?void 0:t)&&t[n++],done:!t}}}}throw new TypeError(r(t)+" is not iterable")}function u(t){var e,n=Object(t),r=[];for(e in n)r.unshift(e);return function t(){for(;r.length;)if((e=r.pop())in n)return t.value=e,t.done=!1,t;return t.done=!0,t}}function s(t,e,n,r,o){return new l(f().w(t,e,n,r),o||Promise)}function l(c,u){var o;this.next||(w(l.prototype),w(l.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),w(this,"_invoke",function(n,t,r){function e(){return new u(function(t,e){!function e(t,n,r,o){try{var a=c[t](n),i=a.value;return i instanceof p?u.resolve(i.v).then(function(t){e("next",t,r,o)},function(t){e("throw",t,r,o)}):u.resolve(i).then(function(t){a.value=t,r(a)},function(t){return e("throw",t,r,o)})}catch(t){o(t)}}(n,r,t,e)})}return o=o?o.then(e,e):e()},!0)}function f(){var h,t="function"==typeof Symbol?Symbol:{},e=t.iterator||"@@iterator",n=t.toStringTag||"@@toStringTag";function r(t,e,n,r){var o,a,i,c,u,s,l,f,p,e=e&&e.prototype instanceof m?e:m,e=Object.create(e.prototype);return w(e,"_invoke",(o=t,a=n,l=r||[],f=!1,p={p:s=0,n:0,v:h,a:d,f:d.bind(h,4),d:function(t,e){return i=t,c=0,u=h,p.n=e,y}},function(t,e,n){if(1<s)throw TypeError("Generator is already running");for(f&&1===e&&d(e,n),c=e,u=n;(v=c<2?h:u)||!f;){i||(c?c<3?(1<c&&(p.n=-1),d(c,u)):p.n=u:p.v=u);try{if(s=2,i){if(v=i[t=c?t:"next"]){if(!(v=v.call(i,u)))throw TypeError("iterator result is not an object");if(!v.done)return v;u=v.value,c<2&&(c=0)}else 1===c&&(v=i.return)&&v.call(i),c<2&&(u=TypeError("The iterator does not provide a '"+t+"' method"),c=1);i=h}else if((v=(f=p.n<0)?u:o.call(a,p))!==y)break}catch(t){i=h,c=1,u=t}finally{s=1}}return{value:v,done:f}}),!0),e;function d(t,e){for(c=t,u=e,v=0;!f&&s&&!n&&v<l.length;v++){var n,r=l[v],o=p.p,a=r[2];3<t?(n=a===e)&&(u=r[(c=r[4])?5:c=3],r[4]=r[5]=h):r[0]<=o&&((n=t<2&&o<r[1])?(c=0,p.v=e,p.n=r[1]):o<a&&(n=t<3||r[0]>e||a<e)&&(r[4]=t,r[5]=e,p.n=a,c=0))}if(n||1<t)return y;throw f=!0,e}}var y={};function m(){}function o(){}function a(){}var v=Object.getPrototypeOf,t=[][e]?v(v([][e]())):(w(v={},e,function(){return this}),v),i=a.prototype=m.prototype=Object.create(t);function c(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,a):(t.__proto__=a,w(t,n,"GeneratorFunction")),t.prototype=Object.create(i),t}return w(i,"constructor",o.prototype=a),w(a,"constructor",o),w(a,n,o.displayName="GeneratorFunction"),w(i),w(i,n,"Generator"),w(i,e,function(){return this}),w(i,"toString",function(){return"[object Generator]"}),(f=function(){return{w:r,m:c}})()}function w(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}(w=function(t,e,n,r){e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:((r=function(e,n){w(t,e,function(t){return this._invoke(e,n,t)})})("next",0),r("throw",1),r("return",2))})(t,e,n,r)}function p(t,e){this.v=t,this.k=e}function d(t,e,n,r,o,a,i){try{var c=t[a](i),u=c.value}catch(t){return n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}function S(c){return function(){var t=this,i=arguments;return new Promise(function(e,n){var r=c.apply(t,i);function o(t){d(r,e,n,o,a,"next",t)}function a(t){d(r,e,n,o,a,"throw",t)}o(void 0)})}}$(document).ready(function(){var r,t,o,a,i,e,n,c,u,s,l,f,p,d,h;console.log("Loaded this checkout module."),0<$("#checkout-home-widget-container").length&&function(){var t=S(g().mark(function t(){var e;return g().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return m.checkoutUi.showLoader(),t.prev=1,e={page:0,pageSize:4},t.next=5,y.checkoutService.getOrders(e);case 5:e=t.sent,m.checkoutUi.renderOrders(e),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),console.error("Error loading recent transactions:",t.t0);case 12:return t.prev=12,m.checkoutUi.hideLoader(),t.finish(12);case 15:case"end":return t.stop()}},t,null,[[1,9,12,15]])}));return function(){return t.apply(this,arguments)}}()(),0<$("#checkout-catalog-page").length&&(r=function(){var t=y.checkoutService.sortData(o,e,n);m.checkoutUi.renderCatalog(t,!1),m.checkoutUi.updateSortIcons(e,n)},t=function(){var t=S(g().mark(function t(){var e,n=arguments;return g().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=0<n.length&&void 0!==n[0]&&n[0],m.checkoutUi.showLoader(),e&&(a=0,o=[]),t.prev=3,e={page:a,pageSize:i},t.next=7,y.checkoutService.getCatalog(e);case 7:e=t.sent,o.push.apply(o,b(e)),r(),m.checkoutUi.updateLoadMoreButton(e.length===i),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(3),console.error("Error loading more transactions:",t.t0);case 16:return t.prev=16,m.checkoutUi.hideLoader(),t.finish(16);case 19:case"end":return t.stop()}},t,null,[[3,13,16,19]])}));return function(){return t.apply(this,arguments)}}(),o=[],a=0,i=10,e="createdAt",n="desc",$("th.sortable").on("click",function(){var t=$(this).data("sort");n=e===t?"asc"===n?"desc":"asc":(e=t,"asc"),r()}),$("#checkout-catalog-load-more").on("click",function(){a++,t()}),$("#checkout-catalog-export-csv-button").on("click",S(g().mark(function t(){var e,n,r;return g().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return(e=$(this)).prop("disabled",!0).html('<span class="spinner-border spinner-border-sm me-1" role="status" aria-hidden="true"></span> Exporting...'),t.prev=2,t.next=5,y.checkoutService.exportCatalogToCsv(o);case 5:n=t.sent,r="checkout_catalog_".concat((new Date).toISOString().split("T")[0],".csv"),v.fileUtils.downloadFile(n,r,"text/csv"),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(2),console.error("Error during CSV export:",t.t0),alert("Failed to export data. Please try again.");case 14:return t.prev=14,e.prop("disabled",!1).html('<i class="uil uil-download-alt me-1"></i> Export to CSV'),t.finish(14);case 17:case"end":return t.stop()}},t,this,[[2,10,14,17]])}))),t()),0<$("#checkout-orders-page").length&&(c=function(){var t=y.checkoutService.sortData(s,p,d);m.checkoutUi.renderOrders(t,!1),m.checkoutUi.updateSortIcons(p,d)},u=function(){var t=S(g().mark(function t(){var e,n=arguments;return g().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=0<n.length&&void 0!==n[0]&&n[0],m.checkoutUi.showLoader(),e&&(l=0,s=[]),t.prev=3,e={page:l,pageSize:f,filters:h},t.next=7,y.checkoutService.getOrders(e);case 7:e=t.sent,s.push.apply(s,b(e)),c(),m.checkoutUi.updateLoadMoreButton(e.length===f,!0),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(3),console.error("Error loading more transactions:",t.t0);case 16:return t.prev=16,m.checkoutUi.hideLoader(),t.finish(16);case 19:case"end":return t.stop()}},t,null,[[3,13,16,19]])}));return function(){return t.apply(this,arguments)}}(),s=[],l=0,f=10,p="createdAt",d="desc",h={},$("#checkout-order-apply-filter-button").on("click",function(){var t=$("#checkout-order-new-filter-field").val(),e=$("#checkout-order-new-filter-value").val();e&&(h[t]=e,console.log("Current filters",h),m.checkoutUi.renderFilterTags(h),m.checkoutUi.clearFilterInputs(),u(!0))}),$("#checkout-order-filter-tags-container").on("click",".remove-filter",function(t){t.preventDefault();t=$(this).data("filter-key");delete h[t],m.checkoutUi.renderFilterTags(h),u(!0)}),$("th.sortable").on("click",function(){var t=$(this).data("sort");d=p===t?"asc"===d?"desc":"asc":(p=t,"asc"),c()}),$("#checkout-order-load-more").on("click",function(){l++,u()}),$("#checkout-order-export-csv-button").on("click",S(g().mark(function t(){var e,n,r;return g().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return(e=$(this)).prop("disabled",!0).html('<span class="spinner-border spinner-border-sm me-1" role="status" aria-hidden="true"></span> Exporting...'),t.prev=2,t.next=5,y.checkoutService.exportOrdersToCsv(s);case 5:n=t.sent,r="checkout_orders_".concat((new Date).toISOString().split("T")[0],".csv"),v.fileUtils.downloadFile(n,r,"text/csv"),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(2),console.error("Error during CSV export:",t.t0),alert("Failed to export data. Please try again.");case 14:return t.prev=14,e.prop("disabled",!1).html('<i class="uil uil-download-alt me-1"></i> Export to CSV'),t.finish(14);case 17:case"end":return t.stop()}},t,this,[[2,10,14,17]])}))),u())})},{"../../core/utils/file.utils":5,"./domain/checkout.service.js":13,"./ui/checkout.ui.js":17}],15:[function(t,e,n){"use strict";function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){t=function(t,e){if("object"!=o(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);n=n.call(t,e||"default");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"==o(t)?t:t+""}(r.key),r)}}function a(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}Object.defineProperty(n,"__esModule",{value:!0}),n.CheckoutCatalog=void 0;n.CheckoutCatalog=a(function t(e){e.id;var n=e.operator_id,r=e.sku_id,o=e.title,e=e.amount;if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.operatorId=n,this.skuId=r,this.title=o,this.amount=e})},{}],16:[function(t,e,n){"use strict";function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){t=function(t,e){if("object"!=o(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);n=n.call(t,e||"default");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"==o(t)?t:t+""}(r.key),r)}}Object.defineProperty(n,"__esModule",{value:!0}),n.CheckoutOrder=void 0;n.CheckoutOrder=function(){function r(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=this,n=r;if(!(e instanceof n))throw new TypeError("Cannot call a class as a function");this.token=t.token||null,this.operatorId=t.operator_id||null,this.skuId=t.sku_id||null,this.amount=parseFloat(t.amount)||0,this.reference=t.reference||"",this.externalReference=t.external_reference||null,this.customerId=t.customer_id||null,this.status=t.status||"UNKNOWN",this.createdAt=t.created_at?new Date(t.created_at):null,this.description=t.description||""}return t=r,n=[{key:"fromDTO",value:function(t){return new r(t)}}],(e=[{key:"isPending",value:function(){return"NOT_COMPLETED"===this.status}},{key:"isCompleted",value:function(){return"COMPLETED"===this.status}},{key:"getFormattedAmount",value:function(){return this.amount.toLocaleString(0<arguments.length&&void 0!==arguments[0]?arguments[0]:"es-PA",{style:"currency",currency:1<arguments.length&&void 0!==arguments[1]?arguments[1]:"USD"})}},{key:"getFormattedDate",value:function(){return this.createdAt?this.createdAt.toLocaleString(0<arguments.length&&void 0!==arguments[0]?arguments[0]:"es-MX",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A"}},{key:"getDisplayStatus",value:function(){switch(this.status){case"SUCCESS":return{text:"Completed",colorClass:"success"};case"NOT_COMPLETED":return{text:"Pending",colorClass:"warning"};case"FAILED":return{text:"Failed",colorClass:"danger"};case"PENDING":return{text:"Pending",colorClass:"warning"};default:return{text:this.status,colorClass:"secondary"}}}}])&&a(t.prototype,e),n&&a(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n}()},{}],17:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.checkoutUi=void 0;t("../models/checkout-catalog.model.js"),n.checkoutUi={elements:{catalogTableBody:"#checkout-catalog-tbody",loader:"#checkout-loader",loadMoreButton:"#checkout-catalog-load-more",sortableHeaders:"th.sortable",ordersTableBody:"#checkout-order-transactions-tbody",ordersLoadMoreButton:"#checkout-order-load-more",filterTagsContainer:"#checkout-order-filter-tags-container",newFilterField:"#checkout-order-new-filter-field",newFilterValue:"#checkout-order-new-filter-value"},showLoader:function(){$(this.elements.loader).show()},hideLoader:function(){$(this.elements.loader).hide()},renderCatalog:function(t){var e=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=$(this.elements.catalogTableBody);e||n.empty(),0!==t.length||e?t.forEach(function(t){t='\n                <tr style="cursor: pointer;">\n                  <td><span class="font-monospace">'.concat(t.operatorId,'</span></td>\n                  <td><span class="font-monospace">').concat(t.skuId,"</span></td>\n                  <td>").concat(t.title,"</td>\n                  <td>").concat(t.amount,"</td>\n                </tr>\n            ");n.append(t)}):this.renderEmptyState()},renderOrders:function(t){var e=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=$(this.elements.ordersTableBody);e||n.empty(),0!==t.length||e?t.forEach(function(t){var e=t.getDisplayStatus(),e='\n                <tr style="cursor: pointer;">\n                  <td><span class="font-monospace">'.concat(t.token,"</span></td>\n                  <td>").concat(t.operatorId,"</></td>\n                  <td>").concat(t.skuId,"</td>\n                  <td>").concat(t.reference,"</td>\n                  <td>").concat(t.externalReference,'</td>\n                  <td><span class="badge bg-').concat(e.colorClass,'">').concat(e.text,"</span></td>\n                  <td>").concat(t.getFormattedDate(),"</td>\n                </tr>\n            ");n.append(e)}):this.renderEmptyState()},renderFilterTags:function(t){var e,n,r=$(this.elements.filterTagsContainer);for(e in r.empty(),t)t[e]&&(n=e.replace("_"," ").replace(/\b\w/g,function(t){return t.toUpperCase()}),n='\n                    <span class="badge bg-secondary me-1 fs-6">\n                        '.concat(n,": ").concat(t[e],'\n                        <a href="#" class="text-white ms-1 remove-filter" data-filter-key="').concat(e,'">×</a>\n                    </span>\n                '),r.append(n))},clearFilterInputs:function(){$(this.elements.newFilterValue).val("")},updateLoadMoreButton:function(t){var e=1<arguments.length&&void 0!==arguments[1]&&arguments[1]?this.elements.ordersLoadMoreButton:this.elements.loadMoreButton,e=$(e);t?e.show():e.hide()},renderEmptyState:function(){$(this.elements.tableBody).html('\n            <tr>\n                <td colspan="5" class="text-center p-4">\n                    <p class="mb-0">No SPEI transactions found.</p>\n                </td>\n            </tr>\n        ')},updateSortIcons:function(n,r){$(this.elements.sortableHeaders).each(function(){var t=$(this),e=t.find("i");e.removeClass("uil-sort-amount-up uil-sort-amount-down").addClass("uil-sort"),t.data("sort")===n&&("asc"===r?e.removeClass("uil-sort").addClass("uil-sort-amount-up"):e.removeClass("uil-sort").addClass("uil-sort-amount-down"))})},renderTransactionDetails:function(t){var e,n,r;t&&(r=t.getDisplayStatus(),(e=function(t,e){$(t).text(e).removeClass("placeholder-glow").empty().text(e)})("#payer-name",t.payerName),e("#payer-rfc",t.payerRfc),e("#payer-clabe",t.payerClabe),e("#payer-institution",t.payerInstitution),e("#beneficiary-name",t.beneficiaryName),e("#beneficiary-rfc",t.beneficiaryRfc),e("#beneficiary-clabe",t.beneficiaryClabe),e("#details-id",t.id),e("#details-tracking-key",t.trackingKey),e("#details-type",t.transactionType),e("#details-amount",t.getFormattedAmount()),n="#details-status",r='<span class="badge bg-'.concat(r.colorClass,'">').concat(r.text,"</span>"),$(n).html(r).removeClass("placeholder-glow"),e("#details-payment-concept",t.paymentConcept),e("#details-numeric-reference",t.numericReference),e("#details-customer-tx-id",t.customerTransactionId),e("#details-customer-id",t.customerId),e("#details-created-at",t.createdAt.toLocaleString()),e("#details-updated-at",t.updatedAt.toLocaleString()))},renderWebhooksTable:function(t){var n=$("#webhooks-tbody");n.empty(),t&&0!==t.length?t.forEach(function(t){var e=t.getDisplayStatus(),e='\n                <tr class="webhook-row" data-id="'.concat(t.id,'" style="cursor: pointer;">\n                    <td>').concat(t.id,"</td>\n                    <td>").concat(t.eventTypeDescription,'</td>\n                    <td><span class="badge bg-').concat(e.colorClass,'">').concat(e.text,"</span></td>\n                    <td>").concat(t.attempts,"</td>\n                    <td>").concat(t.firstSentAt?t.firstSentAt.toLocaleString():"N/A","</td>\n                </tr>\n            ");n.append(e)}):n.html('<tr><td colspan="5" class="text-center">No webhooks found for this transaction.</td></tr>')},showWebhookDetailsModal:function(t){t&&($("#modal-request-id").text(t.requestId||"N/A"),$("#modal-notification-code").text(t.notificationCode||"N/A"),$("#modal-detail-code").text(t.detailCode||"N/A"),$("#modal-failed-reason").text(t.detailFailedReason||"N/A"),$("#modal-failed-message").text(t.detailFailedMessage||"N/A"),t=t.metadata?JSON.stringify(t.metadata,null,2):"No metadata.",$("#modal-metadata").text(t),new bootstrap.Modal(document.getElementById("webhook-details-modal")).show())}}},{"../models/checkout-catalog.model.js":15}],18:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.customerApi=void 0;var r=t("../../../core/api/api.client.js");n.customerApi={getCustomers:function(){var t="".concat(r.apiClient.USERS_BASE_URL,"/customer");return r.apiClient.get(t)},getCustomerById:function(t){t="".concat(r.apiClient.USERS_BASE_URL,"/customer/by-id/").concat(t);return r.apiClient.get(t)}}},{"../../../core/api/api.client.js":2}],19:[function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.customerRepository=void 0;var o=t("./customer.api.js"),a=t("../models/customer-minified.model.js"),i=t("../models/customer-details.model");function c(){var o=p(),t=o.m(c),e=(Object.getPrototypeOf?Object.getPrototypeOf(t):t.__proto__).constructor;function a(t){t="function"==typeof t&&t.constructor;return!!t&&(t===e||"GeneratorFunction"===(t.displayName||t.name))}var n={throw:1,return:2,break:3,continue:3};function i(t){var o,a;return function(r){o||(o={stop:function(){return a(r.a,2)},catch:function(){return r.v},abrupt:function(t,e){return a(r.a,n[t],e)},delegateYield:function(t,e,n){return o.resultName=e,a(r.d,u(t),n)},finish:function(t){return a(r.f,t)}},a=function(t,e,n){r.p=o.prev,r.n=o.next;try{return t(e,n)}finally{o.next=r.n}}),o.resultName&&(o[o.resultName]=r.v,o.resultName=void 0),o.sent=r.v,o.next=r.n;try{return t.call(this,o)}finally{r.p=o.prev,r.n=o.next}}}return(c=function(){return{wrap:function(t,e,n,r){return o.w(i(t),e,n,r&&r.reverse())},isGeneratorFunction:a,mark:o.m,awrap:function(t,e){return new d(t,e)},AsyncIterator:f,async:function(t,e,n,r,o){return(a(e)?l:function(t,e,n,r,o){var a=l(t,e,n,r,o);return a.next().then(function(t){return t.done?t.value:a.next()})})(i(t),e,n,r,o)},keys:s,values:u}})()}function u(t){if(null!=t){var e=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],n=0;if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return{value:(t=t&&n>=t.length?void 0:t)&&t[n++],done:!t}}}}throw new TypeError(r(t)+" is not iterable")}function s(t){var e,n=Object(t),r=[];for(e in n)r.unshift(e);return function t(){for(;r.length;)if((e=r.pop())in n)return t.value=e,t.done=!1,t;return t.done=!0,t}}function l(t,e,n,r,o){return new f(p().w(t,e,n,r),o||Promise)}function f(c,u){var o;this.next||(b(f.prototype),b(f.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),b(this,"_invoke",function(n,t,r){function e(){return new u(function(t,e){!function e(t,n,r,o){try{var a=c[t](n),i=a.value;return i instanceof d?u.resolve(i.v).then(function(t){e("next",t,r,o)},function(t){e("throw",t,r,o)}):u.resolve(i).then(function(t){a.value=t,r(a)},function(t){return e("throw",t,r,o)})}catch(t){o(t)}}(n,r,t,e)})}return o=o?o.then(e,e):e()},!0)}function p(){var h,t="function"==typeof Symbol?Symbol:{},e=t.iterator||"@@iterator",n=t.toStringTag||"@@toStringTag";function r(t,e,n,r){var o,a,i,c,u,s,l,f,p,e=e&&e.prototype instanceof m?e:m,e=Object.create(e.prototype);return b(e,"_invoke",(o=t,a=n,l=r||[],f=!1,p={p:s=0,n:0,v:h,a:d,f:d.bind(h,4),d:function(t,e){return i=t,c=0,u=h,p.n=e,y}},function(t,e,n){if(1<s)throw TypeError("Generator is already running");for(f&&1===e&&d(e,n),c=e,u=n;(v=c<2?h:u)||!f;){i||(c?c<3?(1<c&&(p.n=-1),d(c,u)):p.n=u:p.v=u);try{if(s=2,i){if(v=i[t=c?t:"next"]){if(!(v=v.call(i,u)))throw TypeError("iterator result is not an object");if(!v.done)return v;u=v.value,c<2&&(c=0)}else 1===c&&(v=i.return)&&v.call(i),c<2&&(u=TypeError("The iterator does not provide a '"+t+"' method"),c=1);i=h}else if((v=(f=p.n<0)?u:o.call(a,p))!==y)break}catch(t){i=h,c=1,u=t}finally{s=1}}return{value:v,done:f}}),!0),e;function d(t,e){for(c=t,u=e,v=0;!f&&s&&!n&&v<l.length;v++){var n,r=l[v],o=p.p,a=r[2];3<t?(n=a===e)&&(u=r[(c=r[4])?5:c=3],r[4]=r[5]=h):r[0]<=o&&((n=t<2&&o<r[1])?(c=0,p.v=e,p.n=r[1]):o<a&&(n=t<3||r[0]>e||a<e)&&(r[4]=t,r[5]=e,p.n=a,c=0))}if(n||1<t)return y;throw f=!0,e}}var y={};function m(){}function o(){}function a(){}var v=Object.getPrototypeOf,t=[][e]?v(v([][e]())):(b(v={},e,function(){return this}),v),i=a.prototype=m.prototype=Object.create(t);function c(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,a):(t.__proto__=a,b(t,n,"GeneratorFunction")),t.prototype=Object.create(i),t}return b(i,"constructor",o.prototype=a),b(a,"constructor",o),b(a,n,o.displayName="GeneratorFunction"),b(i),b(i,n,"Generator"),b(i,e,function(){return this}),b(i,"toString",function(){return"[object Generator]"}),(p=function(){return{w:r,m:c}})()}function b(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}(b=function(t,e,n,r){e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:((r=function(e,n){b(t,e,function(t){return this._invoke(e,n,t)})})("next",0),r("throw",1),r("return",2))})(t,e,n,r)}function d(t,e){this.v=t,this.k=e}function h(t,e,n,r,o,a,i){try{var c=t[a](i),u=c.value}catch(t){return n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}function y(c){return function(){var t=this,i=arguments;return new Promise(function(e,n){var r=c.apply(t,i);function o(t){h(r,e,n,o,a,"next",t)}function a(t){h(r,e,n,o,a,"throw",t)}o(void 0)})}}var m,v;n.customerRepository={getAllCustomers:(v=y(c().mark(function t(){var e,n;return c().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.customerApi.getCustomers();case 2:if((e=t.sent).success&&e.data&&e.data.customers&&Array.isArray(e.data.customers))return t.abrupt("return",e.data.customers.map(function(t){return new a.CustomerMinified(t)}));t.next=7;break;case 7:return console.error("Failed to retrieve customers from repository:",(null==(n=e.error)?void 0:n.message)||"Unexpected response format."),t.abrupt("return",[]);case 9:case"end":return t.stop()}},t)})),function(){return v.apply(this,arguments)}),getCustomerById:(m=y(c().mark(function t(e){var n,r;return c().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.customerApi.getCustomerById(e);case 2:if((n=t.sent).success&&n.data)return t.abrupt("return",new i.CustomerDetails.fromDTO(n.data));t.next=7;break;case 7:throw console.error("Failed to retrieve customer by ID:",(null==(r=n.error)?void 0:r.message)||"Unexpected response format."),new Error("Customer not found or invalid response format.");case 9:case"end":return t.stop()}},t)})),function(t){return m.apply(this,arguments)})}},{"../models/customer-details.model":22,"../models/customer-minified.model.js":23,"./customer.api.js":18}],20:[function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.customerService=void 0;var o=t("../data/customer.repository.js");function c(){var o=p(),t=o.m(c),e=(Object.getPrototypeOf?Object.getPrototypeOf(t):t.__proto__).constructor;function a(t){t="function"==typeof t&&t.constructor;return!!t&&(t===e||"GeneratorFunction"===(t.displayName||t.name))}var n={throw:1,return:2,break:3,continue:3};function i(t){var o,a;return function(r){o||(o={stop:function(){return a(r.a,2)},catch:function(){return r.v},abrupt:function(t,e){return a(r.a,n[t],e)},delegateYield:function(t,e,n){return o.resultName=e,a(r.d,u(t),n)},finish:function(t){return a(r.f,t)}},a=function(t,e,n){r.p=o.prev,r.n=o.next;try{return t(e,n)}finally{o.next=r.n}}),o.resultName&&(o[o.resultName]=r.v,o.resultName=void 0),o.sent=r.v,o.next=r.n;try{return t.call(this,o)}finally{r.p=o.prev,r.n=o.next}}}return(c=function(){return{wrap:function(t,e,n,r){return o.w(i(t),e,n,r&&r.reverse())},isGeneratorFunction:a,mark:o.m,awrap:function(t,e){return new d(t,e)},AsyncIterator:f,async:function(t,e,n,r,o){return(a(e)?l:function(t,e,n,r,o){var a=l(t,e,n,r,o);return a.next().then(function(t){return t.done?t.value:a.next()})})(i(t),e,n,r,o)},keys:s,values:u}})()}function u(t){if(null!=t){var e=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],n=0;if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return{value:(t=t&&n>=t.length?void 0:t)&&t[n++],done:!t}}}}throw new TypeError(r(t)+" is not iterable")}function s(t){var e,n=Object(t),r=[];for(e in n)r.unshift(e);return function t(){for(;r.length;)if((e=r.pop())in n)return t.value=e,t.done=!1,t;return t.done=!0,t}}function l(t,e,n,r,o){return new f(p().w(t,e,n,r),o||Promise)}function f(c,u){var o;this.next||(b(f.prototype),b(f.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),b(this,"_invoke",function(n,t,r){function e(){return new u(function(t,e){!function e(t,n,r,o){try{var a=c[t](n),i=a.value;return i instanceof d?u.resolve(i.v).then(function(t){e("next",t,r,o)},function(t){e("throw",t,r,o)}):u.resolve(i).then(function(t){a.value=t,r(a)},function(t){return e("throw",t,r,o)})}catch(t){o(t)}}(n,r,t,e)})}return o=o?o.then(e,e):e()},!0)}function p(){var h,t="function"==typeof Symbol?Symbol:{},e=t.iterator||"@@iterator",n=t.toStringTag||"@@toStringTag";function r(t,e,n,r){var o,a,i,c,u,s,l,f,p,e=e&&e.prototype instanceof m?e:m,e=Object.create(e.prototype);return b(e,"_invoke",(o=t,a=n,l=r||[],f=!1,p={p:s=0,n:0,v:h,a:d,f:d.bind(h,4),d:function(t,e){return i=t,c=0,u=h,p.n=e,y}},function(t,e,n){if(1<s)throw TypeError("Generator is already running");for(f&&1===e&&d(e,n),c=e,u=n;(v=c<2?h:u)||!f;){i||(c?c<3?(1<c&&(p.n=-1),d(c,u)):p.n=u:p.v=u);try{if(s=2,i){if(v=i[t=c?t:"next"]){if(!(v=v.call(i,u)))throw TypeError("iterator result is not an object");if(!v.done)return v;u=v.value,c<2&&(c=0)}else 1===c&&(v=i.return)&&v.call(i),c<2&&(u=TypeError("The iterator does not provide a '"+t+"' method"),c=1);i=h}else if((v=(f=p.n<0)?u:o.call(a,p))!==y)break}catch(t){i=h,c=1,u=t}finally{s=1}}return{value:v,done:f}}),!0),e;function d(t,e){for(c=t,u=e,v=0;!f&&s&&!n&&v<l.length;v++){var n,r=l[v],o=p.p,a=r[2];3<t?(n=a===e)&&(u=r[(c=r[4])?5:c=3],r[4]=r[5]=h):r[0]<=o&&((n=t<2&&o<r[1])?(c=0,p.v=e,p.n=r[1]):o<a&&(n=t<3||r[0]>e||a<e)&&(r[4]=t,r[5]=e,p.n=a,c=0))}if(n||1<t)return y;throw f=!0,e}}var y={};function m(){}function o(){}function a(){}var v=Object.getPrototypeOf,t=[][e]?v(v([][e]())):(b(v={},e,function(){return this}),v),i=a.prototype=m.prototype=Object.create(t);function c(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,a):(t.__proto__=a,b(t,n,"GeneratorFunction")),t.prototype=Object.create(i),t}return b(i,"constructor",o.prototype=a),b(a,"constructor",o),b(a,n,o.displayName="GeneratorFunction"),b(i),b(i,n,"Generator"),b(i,e,function(){return this}),b(i,"toString",function(){return"[object Generator]"}),(p=function(){return{w:r,m:c}})()}function b(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}(b=function(t,e,n,r){e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:((r=function(e,n){b(t,e,function(t){return this._invoke(e,n,t)})})("next",0),r("throw",1),r("return",2))})(t,e,n,r)}function d(t,e){this.v=t,this.k=e}function h(t,e,n,r,o,a,i){try{var c=t[a](i),u=c.value}catch(t){return n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}function a(c){return function(){var t=this,i=arguments;return new Promise(function(e,n){var r=c.apply(t,i);function o(t){h(r,e,n,o,a,"next",t)}function a(t){h(r,e,n,o,a,"throw",t)}o(void 0)})}}var i,y,m;n.customerService={getCustomers:(m=a(c().mark(function t(){return c().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.customerRepository.getAllCustomers();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t)})),function(){return m.apply(this,arguments)}),getCustomerById:(y=a(c().mark(function t(e){return c().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.customerRepository.getCustomerById(e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t)})),function(t){return y.apply(this,arguments)}),exportCustomersToCsv:(i=a(c().mark(function t(e){return c().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this._convertToCsv(e));case 1:case"end":return t.stop()}},t,this)})),function(t){return i.apply(this,arguments)}),_convertToCsv:function(t){var n,r;return t&&0!==t.length?(n=["id","firstName","lastName","email","createdAt","document","customerStatus"],r=["ID","First Name","Last Name","Email","Phone","Document","Status"].join(",")+"\n",t.forEach(function(e){var t=n.map(function(t){t=e[t];return t instanceof Date?t=t.toLocaleString():"number"==typeof t?t=t.toFixed(2):null==t?t="":((t=String(t).replace(/"/g,'""')).includes(",")||t.includes("\n"))&&(t='"'.concat(t,'"')),t});r+=t.join(",")+"\n"}),r):"No data to export."}}},{"../data/customer.repository.js":19}],21:[function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var a=t("./domain/customer.service"),i=t("./ui/customer.ui.js"),c=t("../../core/utils/file.utils");function u(){var o=d(),t=o.m(u),e=(Object.getPrototypeOf?Object.getPrototypeOf(t):t.__proto__).constructor;function a(t){t="function"==typeof t&&t.constructor;return!!t&&(t===e||"GeneratorFunction"===(t.displayName||t.name))}var n={throw:1,return:2,break:3,continue:3};function i(t){var o,a;return function(r){o||(o={stop:function(){return a(r.a,2)},catch:function(){return r.v},abrupt:function(t,e){return a(r.a,n[t],e)},delegateYield:function(t,e,n){return o.resultName=e,a(r.d,s(t),n)},finish:function(t){return a(r.f,t)}},a=function(t,e,n){r.p=o.prev,r.n=o.next;try{return t(e,n)}finally{o.next=r.n}}),o.resultName&&(o[o.resultName]=r.v,o.resultName=void 0),o.sent=r.v,o.next=r.n;try{return t.call(this,o)}finally{r.p=o.prev,r.n=o.next}}}return(u=function(){return{wrap:function(t,e,n,r){return o.w(i(t),e,n,r&&r.reverse())},isGeneratorFunction:a,mark:o.m,awrap:function(t,e){return new h(t,e)},AsyncIterator:p,async:function(t,e,n,r,o){return(a(e)?f:function(t,e,n,r,o){var a=f(t,e,n,r,o);return a.next().then(function(t){return t.done?t.value:a.next()})})(i(t),e,n,r,o)},keys:l,values:s}})()}function s(t){if(null!=t){var e=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],n=0;if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return{value:(t=t&&n>=t.length?void 0:t)&&t[n++],done:!t}}}}throw new TypeError(r(t)+" is not iterable")}function l(t){var e,n=Object(t),r=[];for(e in n)r.unshift(e);return function t(){for(;r.length;)if((e=r.pop())in n)return t.value=e,t.done=!1,t;return t.done=!0,t}}function f(t,e,n,r,o){return new p(d().w(t,e,n,r),o||Promise)}function p(c,u){var o;this.next||(b(p.prototype),b(p.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),b(this,"_invoke",function(n,t,r){function e(){return new u(function(t,e){!function e(t,n,r,o){try{var a=c[t](n),i=a.value;return i instanceof h?u.resolve(i.v).then(function(t){e("next",t,r,o)},function(t){e("throw",t,r,o)}):u.resolve(i).then(function(t){a.value=t,r(a)},function(t){return e("throw",t,r,o)})}catch(t){o(t)}}(n,r,t,e)})}return o=o?o.then(e,e):e()},!0)}function d(){var h,t="function"==typeof Symbol?Symbol:{},e=t.iterator||"@@iterator",n=t.toStringTag||"@@toStringTag";function r(t,e,n,r){var o,a,i,c,u,s,l,f,p,e=e&&e.prototype instanceof m?e:m,e=Object.create(e.prototype);return b(e,"_invoke",(o=t,a=n,l=r||[],f=!1,p={p:s=0,n:0,v:h,a:d,f:d.bind(h,4),d:function(t,e){return i=t,c=0,u=h,p.n=e,y}},function(t,e,n){if(1<s)throw TypeError("Generator is already running");for(f&&1===e&&d(e,n),c=e,u=n;(v=c<2?h:u)||!f;){i||(c?c<3?(1<c&&(p.n=-1),d(c,u)):p.n=u:p.v=u);try{if(s=2,i){if(v=i[t=c?t:"next"]){if(!(v=v.call(i,u)))throw TypeError("iterator result is not an object");if(!v.done)return v;u=v.value,c<2&&(c=0)}else 1===c&&(v=i.return)&&v.call(i),c<2&&(u=TypeError("The iterator does not provide a '"+t+"' method"),c=1);i=h}else if((v=(f=p.n<0)?u:o.call(a,p))!==y)break}catch(t){i=h,c=1,u=t}finally{s=1}}return{value:v,done:f}}),!0),e;function d(t,e){for(c=t,u=e,v=0;!f&&s&&!n&&v<l.length;v++){var n,r=l[v],o=p.p,a=r[2];3<t?(n=a===e)&&(u=r[(c=r[4])?5:c=3],r[4]=r[5]=h):r[0]<=o&&((n=t<2&&o<r[1])?(c=0,p.v=e,p.n=r[1]):o<a&&(n=t<3||r[0]>e||a<e)&&(r[4]=t,r[5]=e,p.n=a,c=0))}if(n||1<t)return y;throw f=!0,e}}var y={};function m(){}function o(){}function a(){}var v=Object.getPrototypeOf,t=[][e]?v(v([][e]())):(b(v={},e,function(){return this}),v),i=a.prototype=m.prototype=Object.create(t);function c(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,a):(t.__proto__=a,b(t,n,"GeneratorFunction")),t.prototype=Object.create(i),t}return b(i,"constructor",o.prototype=a),b(a,"constructor",o),b(a,n,o.displayName="GeneratorFunction"),b(i),b(i,n,"Generator"),b(i,e,function(){return this}),b(i,"toString",function(){return"[object Generator]"}),(d=function(){return{w:r,m:c}})()}function b(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}(b=function(t,e,n,r){e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:((r=function(e,n){b(t,e,function(t){return this._invoke(e,n,t)})})("next",0),r("throw",1),r("return",2))})(t,e,n,r)}function h(t,e){this.v=t,this.k=e}function y(t,e,n,r,o,a,i){try{var c=t[a](i),u=c.value}catch(t){return n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}function m(c){return function(){var t=this,i=arguments;return new Promise(function(e,n){var r=c.apply(t,i);function o(t){y(r,e,n,o,a,"next",t)}function a(t){y(r,e,n,o,a,"throw",t)}o(void 0)})}}$(document).ready(function(){var o,t,n;console.log("Loaded this customer module."),0<$("#customers-list-page").length&&(t=function(){var t=m(u().mark(function t(){var e,n,r=arguments;return u().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=0<r.length&&void 0!==r[0]&&r[0],i.customerUI.showLoader(),t.prev=2,console.log("Loading customers..."),t.next=6,a.customerService.getCustomers();case 6:n=t.sent,o=e?o.concat(n):n,i.customerUI.renderCustomers(o,e),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(2),console.error("Error loading customers:",t.t0);case 14:return t.prev=14,i.customerUI.hideLoader(),t.finish(14);case 17:case"end":return t.stop()}},t,null,[[2,11,14,17]])}));return function(){return t.apply(this,arguments)}}(),o=[],$("#customers-export-csv-button").on("click",m(u().mark(function t(){var e,n,r;return u().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return(e=$(this)).prop("disabled",!0).html('<span class="spinner-border spinner-border-sm me-1" role="status" aria-hidden="true"></span> Exporting...'),t.prev=2,t.next=5,a.customerService.exportCustomersToCsv(o);case 5:n=t.sent,r="customers_".concat((new Date).toISOString().split("T")[0],".csv"),c.fileUtils.downloadFile(n,r,"text/csv"),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(2),console.error("Error during CSV export:",t.t0),alert("Failed to export data. Please try again.");case 14:return t.prev=14,e.prop("disabled",!1).html('<i class="uil uil-download-alt me-1"></i> Export to CSV'),t.finish(14);case 17:case"end":return t.stop()}},t,this,[[2,10,14,17]])}))),$("#products-datatable tbody").on("click","tr",function(){var t=$(this).data("id");t&&(console.log("Navigating to details for customer ID: ".concat(t)),window.location.href="/customer/customer-details.html?id=".concat(t))}),t()),0<$("#customer-details-page").length&&(t=function(){var t=m(u().mark(function t(){var e;return u().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,a.customerService.getCustomerById(n);case 3:(e=t.sent)?i.customerUI.renderCustomerDetails(e):$("#customer-details-page").html('<div class="alert alert-danger">Customer not found or an error occurred.</div>'),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),console.error("Error loading customer details:",t.t0),$("#customer-details-page").html('<div class="alert alert-danger">An error occurred while loading customer details.</div>');case 11:case"end":return t.stop()}},t,null,[[0,7]])}));return function(){return t.apply(this,arguments)}}(),(n=new URLSearchParams(window.location.search).get("id"))?t():window.location.href="/customer/customers.html")})},{"../../core/utils/file.utils":5,"./domain/customer.service":20,"./ui/customer.ui.js":24}],22:[function(t,e,n){"use strict";function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){t=function(t,e){if("object"!=o(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);n=n.call(t,e||"default");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"==o(t)?t:t+""}(r.key),r)}}Object.defineProperty(n,"__esModule",{value:!0}),n.CustomerDetails=void 0;n.CustomerDetails=function(){function r(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=this,n=r;if(!(e instanceof n))throw new TypeError("Cannot call a class as a function");this.id=t.customer_id||null,this.status=t.status||"",this.customerStatus=t.customer_status||"Inactive",this.firstName=t.customer_firstname||"",this.lastName=t.customer_lastname||"",this.email=t.email||"",this.phone=t.phone||null,this.document=t.document||null,this.speiClabe=t.spei_clabe||null,this.speiAlias=t.spei_alias||[],this.cashReference=t.cash_reference||null,this.cashAlias=t.cash_alias||null,this.requestId=t.request_id||null}return t=r,n=[{key:"fromDTO",value:function(t){return new r(t)}}],(e=[{key:"getFullName",value:function(){return"".concat(this.firstName," ").concat(this.lastName).trim()}},{key:"isActive",value:function(){return"Active"===this.customerStatus}},{key:"hasSpeiAccounts",value:function(){return!!this.speiClabe||0<this.speiAlias.length}}])&&a(t.prototype,e),n&&a(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n}()},{}],23:[function(t,e,n){"use strict";function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){t=function(t,e){if("object"!=o(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);n=n.call(t,e||"default");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"==o(t)?t:t+""}(r.key),r)}}Object.defineProperty(n,"__esModule",{value:!0}),n.CustomerMinified=void 0;n.CustomerMinified=function(){function c(t){var e=t.id,n=t.firstname,r=t.lastname,o=t.email,a=t.phone,i=t.document,t=t.customer_status;if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");this.id=e,this.firstName=n,this.lastName=r,this.email=o,this.phone=a,this.document=i,this.customerStatus=t}return t=c,(e=[{key:"getFullName",value:function(){return"".concat(this.firstName," ").concat(this.lastName).trim()}},{key:"isActive",value:function(){return"Active"===this.customerStatus}}])&&r(t.prototype,e),n&&r(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n}()},{}],24:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.customerUI=void 0;t("../models/customer-minified.model"),n.customerUI={elements:{tableBody:"#customer-list-tbody",loader:"#customer-table-loader",dataTable:"#products-datatable"},showLoader:function(){$(this.elements.loader).show()},hideLoader:function(){$(this.elements.loader).hide()},renderCustomers:function(t){var e,n=1<arguments.length&&void 0!==arguments[1]&&arguments[1];0!==t.length||n?(e=$(this.elements.tableBody),n||e.empty(),$.fn.DataTable.isDataTable(this.elements.dataTable)&&$(this.elements.dataTable).DataTable().destroy(),$(this.elements.dataTable).DataTable({data:t,columns:[{data:"id"},{data:"firstName"},{data:"lastName"},{data:"email"},{data:"phone",render:function(t){return t||"N/A"}},{data:"document",render:function(t){return t||"N/A"}},{data:"customerStatus",render:function(t,e,n){n=n.isActive?n.isActive():"Active"===t;return'<span class="badge bg-'.concat(n?"success":"danger",'">').concat(t,"</span>")}}],responsive:!0,createdRow:function(t,e,n){$(t).addClass("clickable-row").attr("data-id",e.id).css("cursor","pointer")}})):this.renderEmptyState()},renderCustomerDetails:function(t){var e,n,r;t?($("#details-skeleton-loader").hide(),$("#customer-details-content").fadeIn(),(e=function(t,e){e=e||"N/A";$(t).text(e)})("#summary-name",t.getFullName()),e("#summary-email",t.email),(n=$("#summary-status-badge")).text(t.customerStatus),n.removeClass("bg-success bg-danger"),t.isActive()?n.addClass("bg-success"):n.addClass("bg-danger"),e("#detail-id",t.id),e("#detail-fullname",t.getFullName()),e("#detail-email",t.email),e("#detail-phone",t.phone),e("#detail-document",t.document),e("#detail-spei-clabe",t.speiClabe),(r=$("#detail-spei-alias-list")).empty(),t.speiAlias&&0<t.speiAlias.length?t.speiAlias.forEach(function(t){r.append("<li>".concat(t,"</li>"))}):r.append("<li>N/A</li>"),e("#detail-cash-reference",t.cashReference),e("#detail-cash-alias",t.cashAlias),$("#details-loader").hide(),$("#customer-details-content").fadeIn()):($("#details-skeleton-loader").hide(),$("#customer-details-content").html('<div class="alert alert-danger">Could not load customer details.</div>').show())}}},{"../models/customer-minified.model":23}],25:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.homeApi=void 0;var r=t("../../../core/api/api.client.js");n.homeApi={getDashboardData:function(){var t="".concat(r.apiClient.TRANSACTION_BASE_URL,"/summary");return r.apiClient.get(t)}}},{"../../../core/api/api.client.js":2}],26:[function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.homeRepository=void 0;var a=t("./home.api.js"),i=t("../models/dashboard-summary.model.js");function c(){var o=p(),t=o.m(c),e=(Object.getPrototypeOf?Object.getPrototypeOf(t):t.__proto__).constructor;function a(t){t="function"==typeof t&&t.constructor;return!!t&&(t===e||"GeneratorFunction"===(t.displayName||t.name))}var n={throw:1,return:2,break:3,continue:3};function i(t){var o,a;return function(r){o||(o={stop:function(){return a(r.a,2)},catch:function(){return r.v},abrupt:function(t,e){return a(r.a,n[t],e)},delegateYield:function(t,e,n){return o.resultName=e,a(r.d,u(t),n)},finish:function(t){return a(r.f,t)}},a=function(t,e,n){r.p=o.prev,r.n=o.next;try{return t(e,n)}finally{o.next=r.n}}),o.resultName&&(o[o.resultName]=r.v,o.resultName=void 0),o.sent=r.v,o.next=r.n;try{return t.call(this,o)}finally{r.p=o.prev,r.n=o.next}}}return(c=function(){return{wrap:function(t,e,n,r){return o.w(i(t),e,n,r&&r.reverse())},isGeneratorFunction:a,mark:o.m,awrap:function(t,e){return new d(t,e)},AsyncIterator:f,async:function(t,e,n,r,o){return(a(e)?l:function(t,e,n,r,o){var a=l(t,e,n,r,o);return a.next().then(function(t){return t.done?t.value:a.next()})})(i(t),e,n,r,o)},keys:s,values:u}})()}function u(t){if(null!=t){var e=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],n=0;if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return{value:(t=t&&n>=t.length?void 0:t)&&t[n++],done:!t}}}}throw new TypeError(r(t)+" is not iterable")}function s(t){var e,n=Object(t),r=[];for(e in n)r.unshift(e);return function t(){for(;r.length;)if((e=r.pop())in n)return t.value=e,t.done=!1,t;return t.done=!0,t}}function l(t,e,n,r,o){return new f(p().w(t,e,n,r),o||Promise)}function f(c,u){var o;this.next||(b(f.prototype),b(f.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),b(this,"_invoke",function(n,t,r){function e(){return new u(function(t,e){!function e(t,n,r,o){try{var a=c[t](n),i=a.value;return i instanceof d?u.resolve(i.v).then(function(t){e("next",t,r,o)},function(t){e("throw",t,r,o)}):u.resolve(i).then(function(t){a.value=t,r(a)},function(t){return e("throw",t,r,o)})}catch(t){o(t)}}(n,r,t,e)})}return o=o?o.then(e,e):e()},!0)}function p(){var h,t="function"==typeof Symbol?Symbol:{},e=t.iterator||"@@iterator",n=t.toStringTag||"@@toStringTag";function r(t,e,n,r){var o,a,i,c,u,s,l,f,p,e=e&&e.prototype instanceof m?e:m,e=Object.create(e.prototype);return b(e,"_invoke",(o=t,a=n,l=r||[],f=!1,p={p:s=0,n:0,v:h,a:d,f:d.bind(h,4),d:function(t,e){return i=t,c=0,u=h,p.n=e,y}},function(t,e,n){if(1<s)throw TypeError("Generator is already running");for(f&&1===e&&d(e,n),c=e,u=n;(v=c<2?h:u)||!f;){i||(c?c<3?(1<c&&(p.n=-1),d(c,u)):p.n=u:p.v=u);try{if(s=2,i){if(v=i[t=c?t:"next"]){if(!(v=v.call(i,u)))throw TypeError("iterator result is not an object");if(!v.done)return v;u=v.value,c<2&&(c=0)}else 1===c&&(v=i.return)&&v.call(i),c<2&&(u=TypeError("The iterator does not provide a '"+t+"' method"),c=1);i=h}else if((v=(f=p.n<0)?u:o.call(a,p))!==y)break}catch(t){i=h,c=1,u=t}finally{s=1}}return{value:v,done:f}}),!0),e;function d(t,e){for(c=t,u=e,v=0;!f&&s&&!n&&v<l.length;v++){var n,r=l[v],o=p.p,a=r[2];3<t?(n=a===e)&&(u=r[(c=r[4])?5:c=3],r[4]=r[5]=h):r[0]<=o&&((n=t<2&&o<r[1])?(c=0,p.v=e,p.n=r[1]):o<a&&(n=t<3||r[0]>e||a<e)&&(r[4]=t,r[5]=e,p.n=a,c=0))}if(n||1<t)return y;throw f=!0,e}}var y={};function m(){}function o(){}function a(){}var v=Object.getPrototypeOf,t=[][e]?v(v([][e]())):(b(v={},e,function(){return this}),v),i=a.prototype=m.prototype=Object.create(t);function c(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,a):(t.__proto__=a,b(t,n,"GeneratorFunction")),t.prototype=Object.create(i),t}return b(i,"constructor",o.prototype=a),b(a,"constructor",o),b(a,n,o.displayName="GeneratorFunction"),b(i),b(i,n,"Generator"),b(i,e,function(){return this}),b(i,"toString",function(){return"[object Generator]"}),(p=function(){return{w:r,m:c}})()}function b(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}(b=function(t,e,n,r){e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:((r=function(e,n){b(t,e,function(t){return this._invoke(e,n,t)})})("next",0),r("throw",1),r("return",2))})(t,e,n,r)}function d(t,e){this.v=t,this.k=e}function h(t,e,n,r,o,a,i){try{var c=t[a](i),u=c.value}catch(t){return n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}var y,o;n.homeRepository={getDashboardData:(y=c().mark(function t(){var e,n,r,o;return c().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e="dashboardSummaryCache",r=localStorage.getItem(e)){if(t.prev=4,r=JSON.parse(r),Date.now()-r.timestamp<3e5)return console.log("Returning dashboard summary from cache."),t.abrupt("return",i.DashboardSummary.fromDTO(r.data));t.next=12}else t.next=18;break;case 12:console.log("Cache is stale. Fetching fresh data.");case 13:t.next=18;break;case 15:t.prev=15,t.t0=t.catch(4),console.error("Failed to parse cache. Fetching fresh data.",t.t0);case 18:return console.log("Fetching new dashboard summary from API."),t.prev=19,t.next=22,a.homeApi.getDashboardData();case 22:if(!(n=t.sent).success||!n.data){t.next=29;break}r={timestamp:Date.now(),data:n.data};try{localStorage.setItem(e,JSON.stringify(r)),console.log("Dashboard summary has been cached.")}catch(t){console.error("Failed to write to localStorage. Caching is likely disabled or full.",t)}return t.abrupt("return",i.DashboardSummary.fromDTO(n.data));case 29:throw console.error("Failed to retrieve dashboard data:",(null==(o=n.error)?void 0:o.message)||"Unexpected response format."),new Error("Dashboard data not found or invalid response format.");case 31:t.next=37;break;case 33:throw t.prev=33,t.t1=t.catch(19),console.error("An error occurred during the API call:",t.t1),t.t1;case 37:case"end":return t.stop()}},t,null,[[4,15],[19,33]])}),o=function(){var t=this,i=arguments;return new Promise(function(e,n){var r=y.apply(t,i);function o(t){h(r,e,n,o,a,"next",t)}function a(t){h(r,e,n,o,a,"throw",t)}o(void 0)})},function(){return o.apply(this,arguments)})}},{"../models/dashboard-summary.model.js":29,"./home.api.js":25}],27:[function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.homeService=void 0;var o=t("../data/home.repository");function c(){var o=p(),t=o.m(c),e=(Object.getPrototypeOf?Object.getPrototypeOf(t):t.__proto__).constructor;function a(t){t="function"==typeof t&&t.constructor;return!!t&&(t===e||"GeneratorFunction"===(t.displayName||t.name))}var n={throw:1,return:2,break:3,continue:3};function i(t){var o,a;return function(r){o||(o={stop:function(){return a(r.a,2)},catch:function(){return r.v},abrupt:function(t,e){return a(r.a,n[t],e)},delegateYield:function(t,e,n){return o.resultName=e,a(r.d,u(t),n)},finish:function(t){return a(r.f,t)}},a=function(t,e,n){r.p=o.prev,r.n=o.next;try{return t(e,n)}finally{o.next=r.n}}),o.resultName&&(o[o.resultName]=r.v,o.resultName=void 0),o.sent=r.v,o.next=r.n;try{return t.call(this,o)}finally{r.p=o.prev,r.n=o.next}}}return(c=function(){return{wrap:function(t,e,n,r){return o.w(i(t),e,n,r&&r.reverse())},isGeneratorFunction:a,mark:o.m,awrap:function(t,e){return new d(t,e)},AsyncIterator:f,async:function(t,e,n,r,o){return(a(e)?l:function(t,e,n,r,o){var a=l(t,e,n,r,o);return a.next().then(function(t){return t.done?t.value:a.next()})})(i(t),e,n,r,o)},keys:s,values:u}})()}function u(t){if(null!=t){var e=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],n=0;if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return{value:(t=t&&n>=t.length?void 0:t)&&t[n++],done:!t}}}}throw new TypeError(r(t)+" is not iterable")}function s(t){var e,n=Object(t),r=[];for(e in n)r.unshift(e);return function t(){for(;r.length;)if((e=r.pop())in n)return t.value=e,t.done=!1,t;return t.done=!0,t}}function l(t,e,n,r,o){return new f(p().w(t,e,n,r),o||Promise)}function f(c,u){var o;this.next||(b(f.prototype),b(f.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),b(this,"_invoke",function(n,t,r){function e(){return new u(function(t,e){!function e(t,n,r,o){try{var a=c[t](n),i=a.value;return i instanceof d?u.resolve(i.v).then(function(t){e("next",t,r,o)},function(t){e("throw",t,r,o)}):u.resolve(i).then(function(t){a.value=t,r(a)},function(t){return e("throw",t,r,o)})}catch(t){o(t)}}(n,r,t,e)})}return o=o?o.then(e,e):e()},!0)}function p(){var h,t="function"==typeof Symbol?Symbol:{},e=t.iterator||"@@iterator",n=t.toStringTag||"@@toStringTag";function r(t,e,n,r){var o,a,i,c,u,s,l,f,p,e=e&&e.prototype instanceof m?e:m,e=Object.create(e.prototype);return b(e,"_invoke",(o=t,a=n,l=r||[],f=!1,p={p:s=0,n:0,v:h,a:d,f:d.bind(h,4),d:function(t,e){return i=t,c=0,u=h,p.n=e,y}},function(t,e,n){if(1<s)throw TypeError("Generator is already running");for(f&&1===e&&d(e,n),c=e,u=n;(v=c<2?h:u)||!f;){i||(c?c<3?(1<c&&(p.n=-1),d(c,u)):p.n=u:p.v=u);try{if(s=2,i){if(v=i[t=c?t:"next"]){if(!(v=v.call(i,u)))throw TypeError("iterator result is not an object");if(!v.done)return v;u=v.value,c<2&&(c=0)}else 1===c&&(v=i.return)&&v.call(i),c<2&&(u=TypeError("The iterator does not provide a '"+t+"' method"),c=1);i=h}else if((v=(f=p.n<0)?u:o.call(a,p))!==y)break}catch(t){i=h,c=1,u=t}finally{s=1}}return{value:v,done:f}}),!0),e;function d(t,e){for(c=t,u=e,v=0;!f&&s&&!n&&v<l.length;v++){var n,r=l[v],o=p.p,a=r[2];3<t?(n=a===e)&&(u=r[(c=r[4])?5:c=3],r[4]=r[5]=h):r[0]<=o&&((n=t<2&&o<r[1])?(c=0,p.v=e,p.n=r[1]):o<a&&(n=t<3||r[0]>e||a<e)&&(r[4]=t,r[5]=e,p.n=a,c=0))}if(n||1<t)return y;throw f=!0,e}}var y={};function m(){}function o(){}function a(){}var v=Object.getPrototypeOf,t=[][e]?v(v([][e]())):(b(v={},e,function(){return this}),v),i=a.prototype=m.prototype=Object.create(t);function c(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,a):(t.__proto__=a,b(t,n,"GeneratorFunction")),t.prototype=Object.create(i),t}return b(i,"constructor",o.prototype=a),b(a,"constructor",o),b(a,n,o.displayName="GeneratorFunction"),b(i),b(i,n,"Generator"),b(i,e,function(){return this}),b(i,"toString",function(){return"[object Generator]"}),(p=function(){return{w:r,m:c}})()}function b(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}(b=function(t,e,n,r){e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:((r=function(e,n){b(t,e,function(t){return this._invoke(e,n,t)})})("next",0),r("throw",1),r("return",2))})(t,e,n,r)}function d(t,e){this.v=t,this.k=e}function h(t,e,n,r,o,a,i){try{var c=t[a](i),u=c.value}catch(t){return n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}var y,a;n.homeService={getDashboardData:(y=c().mark(function t(){return c().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,o.homeRepository.getDashboardData();case 3:return t.abrupt("return",t.sent);case 6:throw t.prev=6,t.t0=t.catch(0),console.error("Error fetching dashboard data:",t.t0),t.t0;case 10:case"end":return t.stop()}},t,null,[[0,6]])}),a=function(){var t=this,i=arguments;return new Promise(function(e,n){var r=y.apply(t,i);function o(t){h(r,e,n,o,a,"next",t)}function a(t){h(r,e,n,o,a,"throw",t)}o(void 0)})},function(){return a.apply(this,arguments)})}},{"../data/home.repository":26}],28:[function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=t("./ui/home.ui.js"),a=t("../auth/domain/auth.service.js"),i=t("./domain/home.service");t("../customer/domain/customer.service"),t("../customer/ui/customer.ui");function c(){var o=p(),t=o.m(c),e=(Object.getPrototypeOf?Object.getPrototypeOf(t):t.__proto__).constructor;function a(t){t="function"==typeof t&&t.constructor;return!!t&&(t===e||"GeneratorFunction"===(t.displayName||t.name))}var n={throw:1,return:2,break:3,continue:3};function i(t){var o,a;return function(r){o||(o={stop:function(){return a(r.a,2)},catch:function(){return r.v},abrupt:function(t,e){return a(r.a,n[t],e)},delegateYield:function(t,e,n){return o.resultName=e,a(r.d,u(t),n)},finish:function(t){return a(r.f,t)}},a=function(t,e,n){r.p=o.prev,r.n=o.next;try{return t(e,n)}finally{o.next=r.n}}),o.resultName&&(o[o.resultName]=r.v,o.resultName=void 0),o.sent=r.v,o.next=r.n;try{return t.call(this,o)}finally{r.p=o.prev,r.n=o.next}}}return(c=function(){return{wrap:function(t,e,n,r){return o.w(i(t),e,n,r&&r.reverse())},isGeneratorFunction:a,mark:o.m,awrap:function(t,e){return new d(t,e)},AsyncIterator:f,async:function(t,e,n,r,o){return(a(e)?l:function(t,e,n,r,o){var a=l(t,e,n,r,o);return a.next().then(function(t){return t.done?t.value:a.next()})})(i(t),e,n,r,o)},keys:s,values:u}})()}function u(t){if(null!=t){var e=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],n=0;if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return{value:(t=t&&n>=t.length?void 0:t)&&t[n++],done:!t}}}}throw new TypeError(r(t)+" is not iterable")}function s(t){var e,n=Object(t),r=[];for(e in n)r.unshift(e);return function t(){for(;r.length;)if((e=r.pop())in n)return t.value=e,t.done=!1,t;return t.done=!0,t}}function l(t,e,n,r,o){return new f(p().w(t,e,n,r),o||Promise)}function f(c,u){var o;this.next||(b(f.prototype),b(f.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),b(this,"_invoke",function(n,t,r){function e(){return new u(function(t,e){!function e(t,n,r,o){try{var a=c[t](n),i=a.value;return i instanceof d?u.resolve(i.v).then(function(t){e("next",t,r,o)},function(t){e("throw",t,r,o)}):u.resolve(i).then(function(t){a.value=t,r(a)},function(t){return e("throw",t,r,o)})}catch(t){o(t)}}(n,r,t,e)})}return o=o?o.then(e,e):e()},!0)}function p(){var h,t="function"==typeof Symbol?Symbol:{},e=t.iterator||"@@iterator",n=t.toStringTag||"@@toStringTag";function r(t,e,n,r){var o,a,i,c,u,s,l,f,p,e=e&&e.prototype instanceof m?e:m,e=Object.create(e.prototype);return b(e,"_invoke",(o=t,a=n,l=r||[],f=!1,p={p:s=0,n:0,v:h,a:d,f:d.bind(h,4),d:function(t,e){return i=t,c=0,u=h,p.n=e,y}},function(t,e,n){if(1<s)throw TypeError("Generator is already running");for(f&&1===e&&d(e,n),c=e,u=n;(v=c<2?h:u)||!f;){i||(c?c<3?(1<c&&(p.n=-1),d(c,u)):p.n=u:p.v=u);try{if(s=2,i){if(v=i[t=c?t:"next"]){if(!(v=v.call(i,u)))throw TypeError("iterator result is not an object");if(!v.done)return v;u=v.value,c<2&&(c=0)}else 1===c&&(v=i.return)&&v.call(i),c<2&&(u=TypeError("The iterator does not provide a '"+t+"' method"),c=1);i=h}else if((v=(f=p.n<0)?u:o.call(a,p))!==y)break}catch(t){i=h,c=1,u=t}finally{s=1}}return{value:v,done:f}}),!0),e;function d(t,e){for(c=t,u=e,v=0;!f&&s&&!n&&v<l.length;v++){var n,r=l[v],o=p.p,a=r[2];3<t?(n=a===e)&&(u=r[(c=r[4])?5:c=3],r[4]=r[5]=h):r[0]<=o&&((n=t<2&&o<r[1])?(c=0,p.v=e,p.n=r[1]):o<a&&(n=t<3||r[0]>e||a<e)&&(r[4]=t,r[5]=e,p.n=a,c=0))}if(n||1<t)return y;throw f=!0,e}}var y={};function m(){}function o(){}function a(){}var v=Object.getPrototypeOf,t=[][e]?v(v([][e]())):(b(v={},e,function(){return this}),v),i=a.prototype=m.prototype=Object.create(t);function c(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,a):(t.__proto__=a,b(t,n,"GeneratorFunction")),t.prototype=Object.create(i),t}return b(i,"constructor",o.prototype=a),b(a,"constructor",o),b(a,n,o.displayName="GeneratorFunction"),b(i),b(i,n,"Generator"),b(i,e,function(){return this}),b(i,"toString",function(){return"[object Generator]"}),(p=function(){return{w:r,m:c}})()}function b(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}(b=function(t,e,n,r){e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:((r=function(e,n){b(t,e,function(t){return this._invoke(e,n,t)})})("next",0),r("throw",1),r("return",2))})(t,e,n,r)}function d(t,e){this.v=t,this.k=e}function h(t,e,n,r,o,a,i){try{var c=t[a](i),u=c.value}catch(t){return n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}function y(c){return function(){var t=this,i=arguments;return new Promise(function(e,n){var r=c.apply(t,i);function o(t){h(r,e,n,o,a,"next",t)}function a(t){h(r,e,n,o,a,"throw",t)}o(void 0)})}}$(document).ready(function(){var t;0<$("#user-profile-home").length&&((t=a.authService.getUserProfile())?o.homeUI.renderTopBarUserProfile(t):console.error("No user profile data found.")),0<$("#user-profile-page").length&&((t=a.authService.getUserProfile())?o.homeUI.renderUserProfile(t):console.error("No user profile data found.")),0<$("#spei-dashboard-page").length&&function(){var t=y(c().mark(function t(){var e;return c().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,i.homeService.getDashboardData();case 3:(e=t.sent)?(o.homeUI.renderSpeiDashboardSummary(e),$("#dashboard-skeleton-loader").hide(),$("#dashboard-content").fadeIn()):($("#dashboard-skeleton-loader").hide(),$("#dashboard-content").html('\n            <div class="alert alert-danger" role="alert">\n                <i class="mdi mdi-block-helper me-2"></i>\n                Could not load dashboard data. Please try again later.\n            </div>\n        ').show()),t.next=12;break;case 7:t.prev=7,t.t0=t.catch(0),console.error("Error loading dashboard data:",t.t0),$("#dashboard-skeleton-loader").hide(),$("#dashboard-content").html('\n            <div class="alert alert-danger" role="alert">\n                <i class="mdi mdi-block-helper me-2"></i>\n                Could not load dashboard data. Please try again later.\n            </div>\n        ').show();case 12:case"end":return t.stop()}},t,null,[[0,7]])}));return function(){return t.apply(this,arguments)}}()(),0<$("#checkout-dashboard-page").length&&function(){var t=y(c().mark(function t(){var e;return c().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,i.homeService.getDashboardData();case 3:(e=t.sent)?(o.homeUI.renderCheckoutDashboardSummary(e),$("#dashboard-skeleton-loader").hide(),$("#dashboard-content").fadeIn()):($("#dashboard-skeleton-loader").hide(),$("#dashboard-content").html('\n            <div class="alert alert-danger" role="alert">\n                <i class="mdi mdi-block-helper me-2"></i>\n                Could not load dashboard data. Please try again later.\n            </div>\n        ').show()),t.next=12;break;case 7:t.prev=7,t.t0=t.catch(0),console.error("Error loading dashboard data:",t.t0),$("#dashboard-skeleton-loader").hide(),$("#dashboard-content").html('\n            <div class="alert alert-danger" role="alert">\n                <i class="mdi mdi-block-helper me-2"></i>\n                Could not load dashboard data. Please try again later.\n            </div>\n        ').show();case 12:case"end":return t.stop()}},t,null,[[0,7]])}));return function(){return t.apply(this,arguments)}}()(),$("#send-support-email").on("click",function(t){console.log("Support email button clicked."),t.preventDefault(),window.location.href="mailto:support@test.com"})})},{"../auth/domain/auth.service.js":8,"../customer/domain/customer.service":20,"../customer/ui/customer.ui":24,"./domain/home.service":27,"./ui/home.ui.js":30}],29:[function(t,e,n){"use strict";function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){t=function(t,e){if("object"!=o(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);n=n.call(t,e||"default");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"==o(t)?t:t+""}(r.key),r)}}function a(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n.TransactionSummary=n.TransactionBreakdown=n.TimeSeriesSummary=n.SpeiTransactionSummary=n.DashboardSummary=n.DailyVolume=n.DailyCount=n.CustomerSummary=void 0;var c=n.TransactionBreakdown=a(function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};i(this,t),this.succeeded=e.succeeded||0,this.failed=e.failed||0,this.pending=e.pending||0}),u=n.SpeiTransactionSummary=a(function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};i(this,t),this.totalCount=e.totalCount||0,this.totalAmount=e.totalAmount||0,this.countChangePercentage=e.countChangePercentage||0,this.amountChangePercentage=e.amountChangePercentage||0,this.averageValue=e.averageValue||0,this.successRatePercentage=e.successRatePercentage||0,this.actualBalance=e.actualBalance||0,this.accountClabe=e.accountClabe||"N/A",this.breakdown=new c(e.breakdown)}),s=n.TransactionSummary=a(function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};i(this,t),this.totalCount=e.totalCount||0,this.totalAmount=e.totalAmount||0,this.countChangePercentage=e.countChangePercentage||0,this.amountChangePercentage=e.amountChangePercentage||0,this.averageValue=e.averageValue||0,this.successRatePercentage=e.successRatePercentage||0,this.breakdown=new c(e.breakdown)}),l=n.CustomerSummary=a(function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};i(this,t),this.totalCount=e.totalCount||0,this.newLast30Days=e.newLast30Days||0,this.newLastWeek=e.newLastWeek||0,this.weeklyGrowthPercentage=e.weeklyGrowthPercentage||0}),f=n.DailyCount=a(function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};i(this,t),this.date=e.date||"",this.count=e.count||0}),p=n.DailyVolume=a(function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};i(this,t),this.date=e.date||"",this.count=e.count||0,this.amount=e.amount||0}),d=n.TimeSeriesSummary=a(function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};i(this,t),this.dailyTransactionVolume=(e.dailyTransactionVolume||[]).map(function(t){return new p(t)}),this.dailyNewCustomers=(e.dailyNewCustomers||[]).map(function(t){return new f(t)}),this.dailyCheckoutOrders=(e.dailyCheckoutOrders||[]).map(function(t){return new p(t)})});n.DashboardSummary=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.speiTransactions=new u(t.speiTransactions),this.customers=new l(t.customers),this.checkoutOrders=new s(t.checkoutOrders),this.timeSeries=new d(t.timeSeries)}return a(e,null,[{key:"fromDTO",value:function(t){return new e(t)}}])}()},{}],30:[function(t,e,n){"use strict";function r(t){return function(t){if(Array.isArray(t))return o(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){{var n;if(t)return"string"==typeof t?o(t,e):"Map"===(n="Object"===(n={}.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:n)||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}Object.defineProperty(n,"__esModule",{value:!0}),n.homeUI=void 0;n.homeUI={elements:{userProfileTopBarName:"#user-profile-topbar-name",userProfileTopBarEmail:"#user-profile-topbar-email",userProfileName:"#profile-name",userProfileEmail:"#profile-email",userProfileStatus:"#profile-status",userProfileRoles:"#profile-roles",dashSpeiQty:"#dash-spei-qty",dashSpeiQtyChangePercent:"#dash-spei-qty-change-percent",dashSpeiQtyChangeContainer:"#dash-spei-qty-change-container",dashSpeiQtyChangeIcon:"#dash-spei-qty-change-icon",dashSpeiAmount:"#dash-spei-amount",dashSpeiAmountChangePercent:"#dash-spei-amount-change-percent",dashSpeiAmountChangeContainer:"#dash-spei-amount-change-container",dashSpeiAmountChangeIcon:"#dash-spei-amount-change-icon",dashSpeiAverage:"#dash-spei-average",dashSpeiSuccessRate:"#dash-spei-success-rate",dashSpeiAccountBalance:"#dash-spei-account-balance",dashSpeiAccountCLABE:"#dash-spei-account-clabe",dashCheckoutQty:"#dash-checkout-qty",dashCheckoutQtyChangePercent:"#dash-checkout-qty-change-percent",dashCheckoutQtyChangeContainer:"#dash-checkout-qty-change-container",dashCheckoutQtyChangeIcon:"#dash-checkout-qty-change-icon",dashCheckoutAmount:"#dash-checkout-amount",dashCheckoutAmountChangePercent:"#dash-checkout-amount-change-percent",dashCheckoutAmountChangeContainer:"#dash-checkout-amount-change-container",dashCheckoutAmountChangeIcon:"#dash-checkout-amount-change-icon",dashCheckoutAverage:"#dash-checkout-average",dashCheckoutSuccessRate:"#dash-checkout-success-rate",dashCustomerQty:"#dash-customer-qty",dashCustomerChangePercent:"#dash-customer-change-percent",dashCustomerChangeContainer:"#dash-customer-change-container",dashCustomerChangeIcon:"#dash-customer-change-icon"},renderTopBarUserProfile:function(t){t?($(this.elements.userProfileTopBarName).text(t.name||"N/A"),$(this.elements.userProfileTopBarEmail).text(t.email||"N/A")):console.error("No user profile data provided.")},renderUserProfile:function(t){t?($(this.elements.userProfileName).text(t.name||"N/A"),$(this.elements.userProfileEmail).text(t.email||"N/A"),t.active?$(this.elements.userProfileStatus).html('<span class="badge bg-success">Active</span>'):$(this.elements.userProfileStatus).html('<span class="badge bg-danger">Inactive</span>'),$(this.elements.userProfileRoles).text(t.roles.join(", ")||"N/A")):console.error("No user profile data provided.")},renderSpeiDashboardSummary:function(t){var e=t.speiTransactions,n=($(this.elements.dashSpeiQty).text(e.totalCount||"N/A"),$(this.elements.dashSpeiQtyChangePercent).text("".concat(Math.abs(e.countChangePercentage).toFixed(2),"%")),$(this.elements.dashSpeiQtyChangeContainer)),r=$(this.elements.dashSpeiQtyChangeIcon),n=(n.removeClass("text-success text-danger"),r.removeClass("mdi-arrow-up-bold mdi-arrow-down-bold"),0<=e.countChangePercentage?(n.addClass("text-success"),r.addClass("mdi-arrow-up-bold")):(n.addClass("text-danger"),r.addClass("mdi-arrow-down-bold")),$(this.elements.dashSpeiAmount).text("$".concat(Math.abs(e.totalAmount).toFixed(2))),$(this.elements.dashSpeiAmountChangePercent).text("".concat(Math.abs(e.amountChangePercentage).toFixed(2),"%")),$(this.elements.dashSpeiAmountChangeContainer)),r=$(this.elements.dashSpeiAmountChangeIcon);n.removeClass("text-success text-danger"),r.removeClass("mdi-arrow-up-bold mdi-arrow-down-bold"),0<=e.countChangePercentage?(n.addClass("text-success"),r.addClass("mdi-arrow-up-bold")):(n.addClass("text-danger"),r.addClass("mdi-arrow-down-bold")),$(this.elements.dashSpeiAverage).text("$".concat(Math.abs(e.averageValue).toFixed(2))),$(this.elements.dashSpeiSuccessRate).text("".concat(Math.abs(e.successRatePercentage).toFixed(2),"%")),t.speiTransactions&&t.speiTransactions.breakdown&&this._renderSpeiBreakdownChart(t.speiTransactions.breakdown),t.timeSeries&&t.timeSeries.dailyTransactionVolume&&this._renderTransactionVolumeChart(t.timeSeries.dailyTransactionVolume),e.actualBalance&&$(this.elements.dashSpeiAccountBalance).text("$".concat(Math.abs(e.actualBalance).toFixed(2))),e.accountClabe&&$(this.elements.dashSpeiAccountCLABE).text(e.accountClabe||"N/A")},renderCheckoutDashboardSummary:function(t){var e=t.checkoutOrders,n=($(this.elements.dashCheckoutQty).text(e.totalCount||"N/A"),$(this.elements.dashCheckoutQtyChangePercent).text("".concat(Math.abs(e.countChangePercentage).toFixed(2),"%")),$(this.elements.dashCheckoutQtyChangeContainer)),r=$(this.elements.dashCheckoutQtyChangeIcon),n=(n.removeClass("text-success text-danger"),r.removeClass("mdi-arrow-up-bold mdi-arrow-down-bold"),0<=e.countChangePercentage?(n.addClass("text-success"),r.addClass("mdi-arrow-up-bold")):(n.addClass("text-danger"),r.addClass("mdi-arrow-down-bold")),$(this.elements.dashCheckoutAmount).text("$".concat(Math.abs(e.totalAmount).toFixed(2))),$(this.elements.dashCheckoutAmountChangePercent).text("".concat(Math.abs(e.amountChangePercentage).toFixed(2),"%")),$(this.elements.dashCheckoutAmountChangeContainer)),r=$(this.elements.dashCheckoutAmountChangeIcon);n.removeClass("text-success text-danger"),r.removeClass("mdi-arrow-up-bold mdi-arrow-down-bold"),0<=e.countChangePercentage?(n.addClass("text-success"),r.addClass("mdi-arrow-up-bold")):(n.addClass("text-danger"),r.addClass("mdi-arrow-down-bold")),$(this.elements.dashCheckoutAverage).text("$".concat(Math.abs(e.averageValue).toFixed(2))),$(this.elements.dashCheckoutSuccessRate).text("".concat(Math.abs(e.successRatePercentage).toFixed(2),"%")),t.checkoutOrders&&t.checkoutOrders.breakdown&&this._renderSpeiBreakdownChart(t.checkoutOrders.breakdown),t.timeSeries&&t.timeSeries.dailyCheckoutOrders&&this._renderTransactionVolumeChart(t.timeSeries.dailyCheckoutOrders)},_renderSpeiBreakdownChart:function(t){var e={chart:{height:320,type:"donut"},series:[t.succeeded,t.failed,t.pending],legend:{show:!1},responsive:[{breakpoint:480,options:{chart:{width:200},legend:{position:"bottom"}}}],labels:["Exitosas","Fallidas","Pendientes"],colors:["#0acf97","#fa5c7c","#727cf5"]},n=document.querySelector("#average-sales"),r=(n&&(n.innerHTML="",new ApexCharts(n,e).render()),$(".chart-widget-list"));r.empty(),[{label:"Exitosas",value:t.succeeded,colorClass:"success"},{label:"Fallidas",value:t.failed,colorClass:"danger"},{label:"Pendientes",value:t.pending,colorClass:"primary"}].forEach(function(t){t='\n                <p>\n                    <i class="mdi mdi-square text-'.concat(t.colorClass,'"></i> ').concat(t.label,'\n                    <span class="float-end">').concat(t.value.toLocaleString("en-US"),"</span>\n                </p>\n            ");r.append(t)})},_renderTransactionVolumeChart:function(t){var e;t&&0!==t.length&&(e=t[0].amount.toLocaleString("en-US",{style:"currency",currency:"USD"}),$(".dash-item-overlay h5").text("Transacciones Hoy: ".concat(e)),t=(e=r(t).reverse()).map(function(t){t=new Date(t.date);return t.setDate(t.getDate()+1),t.toLocaleDateString("es-PA",{day:"numeric",month:"short"})}),e={chart:{height:341,type:"line",toolbar:{show:!1},dropShadow:{enabled:!0,top:20,left:0,blur:6,color:"#4250f7",opacity:.2}},stroke:{curve:"smooth",width:3},series:[{name:"Monto",data:e.map(function(t){return t.amount.toFixed(2)})}],xaxis:{categories:t,axisBorder:{show:!1},axisTicks:{show:!1}},yaxis:{labels:{formatter:function(t){return"$"+t.toLocaleString("en-US")}}},tooltip:{y:{formatter:function(t){return"$"+t.toLocaleString("en-US")}}},grid:{show:!0,strokeDashArray:4,padding:{left:20,right:20}},dataLabels:{enabled:!1},colors:["#727cf5"]},t=document.querySelector("#revenue-chart"))&&(t.innerHTML="",new ApexCharts(t,e).render())}}},{}],31:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.speiApi=void 0;var i=t("../../../core/api/api.client.js");n.speiApi={getTransactions:function(t){var e,n=t.page,r=t.pageSize,o=t.filters,a=(null==n&&(n=0),null==r&&(r=10),new URLSearchParams({page:n,page_size:r}));for(e in o)o[e]&&a.append(e,o[e]);t="".concat(i.apiClient.TRANSACTION_BASE_URL,"/spei/transaction?").concat(a.toString());return i.apiClient.get(t)},getTransactionById:function(t){console.log("Fetching transaction details for ID:",t);t="".concat(i.apiClient.TRANSACTION_BASE_URL,"/spei/transaction/").concat(t);return console.log("Constructed endpoint:",t),i.apiClient.get(t)}}},{"../../../core/api/api.client.js":2}],32:[function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.speiRepository=void 0;var a=t("./spei.api.js"),i=t("../models/spei-transaction.model.js"),c=t("../models/webhook-notification.model");function u(){var o=d(),t=o.m(u),e=(Object.getPrototypeOf?Object.getPrototypeOf(t):t.__proto__).constructor;function a(t){t="function"==typeof t&&t.constructor;return!!t&&(t===e||"GeneratorFunction"===(t.displayName||t.name))}var n={throw:1,return:2,break:3,continue:3};function i(t){var o,a;return function(r){o||(o={stop:function(){return a(r.a,2)},catch:function(){return r.v},abrupt:function(t,e){return a(r.a,n[t],e)},delegateYield:function(t,e,n){return o.resultName=e,a(r.d,s(t),n)},finish:function(t){return a(r.f,t)}},a=function(t,e,n){r.p=o.prev,r.n=o.next;try{return t(e,n)}finally{o.next=r.n}}),o.resultName&&(o[o.resultName]=r.v,o.resultName=void 0),o.sent=r.v,o.next=r.n;try{return t.call(this,o)}finally{r.p=o.prev,r.n=o.next}}}return(u=function(){return{wrap:function(t,e,n,r){return o.w(i(t),e,n,r&&r.reverse())},isGeneratorFunction:a,mark:o.m,awrap:function(t,e){return new h(t,e)},AsyncIterator:p,async:function(t,e,n,r,o){return(a(e)?f:function(t,e,n,r,o){var a=f(t,e,n,r,o);return a.next().then(function(t){return t.done?t.value:a.next()})})(i(t),e,n,r,o)},keys:l,values:s}})()}function s(t){if(null!=t){var e=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],n=0;if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return{value:(t=t&&n>=t.length?void 0:t)&&t[n++],done:!t}}}}throw new TypeError(r(t)+" is not iterable")}function l(t){var e,n=Object(t),r=[];for(e in n)r.unshift(e);return function t(){for(;r.length;)if((e=r.pop())in n)return t.value=e,t.done=!1,t;return t.done=!0,t}}function f(t,e,n,r,o){return new p(d().w(t,e,n,r),o||Promise)}function p(c,u){var o;this.next||(b(p.prototype),b(p.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),b(this,"_invoke",function(n,t,r){function e(){return new u(function(t,e){!function e(t,n,r,o){try{var a=c[t](n),i=a.value;return i instanceof h?u.resolve(i.v).then(function(t){e("next",t,r,o)},function(t){e("throw",t,r,o)}):u.resolve(i).then(function(t){a.value=t,r(a)},function(t){return e("throw",t,r,o)})}catch(t){o(t)}}(n,r,t,e)})}return o=o?o.then(e,e):e()},!0)}function d(){var h,t="function"==typeof Symbol?Symbol:{},e=t.iterator||"@@iterator",n=t.toStringTag||"@@toStringTag";function r(t,e,n,r){var o,a,i,c,u,s,l,f,p,e=e&&e.prototype instanceof m?e:m,e=Object.create(e.prototype);return b(e,"_invoke",(o=t,a=n,l=r||[],f=!1,p={p:s=0,n:0,v:h,a:d,f:d.bind(h,4),d:function(t,e){return i=t,c=0,u=h,p.n=e,y}},function(t,e,n){if(1<s)throw TypeError("Generator is already running");for(f&&1===e&&d(e,n),c=e,u=n;(v=c<2?h:u)||!f;){i||(c?c<3?(1<c&&(p.n=-1),d(c,u)):p.n=u:p.v=u);try{if(s=2,i){if(v=i[t=c?t:"next"]){if(!(v=v.call(i,u)))throw TypeError("iterator result is not an object");if(!v.done)return v;u=v.value,c<2&&(c=0)}else 1===c&&(v=i.return)&&v.call(i),c<2&&(u=TypeError("The iterator does not provide a '"+t+"' method"),c=1);i=h}else if((v=(f=p.n<0)?u:o.call(a,p))!==y)break}catch(t){i=h,c=1,u=t}finally{s=1}}return{value:v,done:f}}),!0),e;function d(t,e){for(c=t,u=e,v=0;!f&&s&&!n&&v<l.length;v++){var n,r=l[v],o=p.p,a=r[2];3<t?(n=a===e)&&(u=r[(c=r[4])?5:c=3],r[4]=r[5]=h):r[0]<=o&&((n=t<2&&o<r[1])?(c=0,p.v=e,p.n=r[1]):o<a&&(n=t<3||r[0]>e||a<e)&&(r[4]=t,r[5]=e,p.n=a,c=0))}if(n||1<t)return y;throw f=!0,e}}var y={};function m(){}function o(){}function a(){}var v=Object.getPrototypeOf,t=[][e]?v(v([][e]())):(b(v={},e,function(){return this}),v),i=a.prototype=m.prototype=Object.create(t);function c(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,a):(t.__proto__=a,b(t,n,"GeneratorFunction")),t.prototype=Object.create(i),t}return b(i,"constructor",o.prototype=a),b(a,"constructor",o),b(a,n,o.displayName="GeneratorFunction"),b(i),b(i,n,"Generator"),b(i,e,function(){return this}),b(i,"toString",function(){return"[object Generator]"}),(d=function(){return{w:r,m:c}})()}function b(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}(b=function(t,e,n,r){e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:((r=function(e,n){b(t,e,function(t){return this._invoke(e,n,t)})})("next",0),r("throw",1),r("return",2))})(t,e,n,r)}function h(t,e){this.v=t,this.k=e}function y(t,e,n,r,o,a,i){try{var c=t[a](i),u=c.value}catch(t){return n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}function o(c){return function(){var t=this,i=arguments;return new Promise(function(e,n){var r=c.apply(t,i);function o(t){y(r,e,n,o,a,"next",t)}function a(t){y(r,e,n,o,a,"throw",t)}o(void 0)})}}var m,v;n.speiRepository={getTransactions:(v=o(u().mark(function t(e){var n;return u().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.speiApi.getTransactions(e);case 2:if((n=t.sent).success&&n.data&&Array.isArray(n.data))return t.abrupt("return",n.data.map(function(t){return new i.SpeiTransaction(t)}));t.next=7;break;case 7:return n.success?console.error("API response.data is not in the expected array format:",n.data):console.error("Failed to retrieve transactions from repository:",n.error.message),t.abrupt("return",[]);case 9:case"end":return t.stop()}},t)})),function(t){return v.apply(this,arguments)}),getTransactionById:(m=o(u().mark(function t(e){var n,r,o;return u().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.speiApi.getTransactionById(e);case 2:if((n=t.sent).success&&n.data)return o=new i.SpeiTransaction(n.data),r=[],n.data.webhooks&&Array.isArray(n.data.webhooks)&&(r=n.data.webhooks.map(function(t){return new c.WebhookNotification(t)})),t.abrupt("return",{transaction:o,webhooks:r});t.next=10;break;case 10:return console.error("Failed to retrieve transaction by ID:",null==(o=n.error)?void 0:o.message),t.abrupt("return",null);case 12:case"end":return t.stop()}},t)})),function(t){return m.apply(this,arguments)})}},{"../models/spei-transaction.model.js":35,"../models/webhook-notification.model":36,"./spei.api.js":31}],33:[function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.speiService=void 0;var o=t("../data/spei.repository.js");function a(t){return function(t){if(Array.isArray(t))return i(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){{var n;if(t)return"string"==typeof t?i(t,e):"Map"===(n="Object"===(n={}.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:n)||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function c(){var o=p(),t=o.m(c),e=(Object.getPrototypeOf?Object.getPrototypeOf(t):t.__proto__).constructor;function a(t){t="function"==typeof t&&t.constructor;return!!t&&(t===e||"GeneratorFunction"===(t.displayName||t.name))}var n={throw:1,return:2,break:3,continue:3};function i(t){var o,a;return function(r){o||(o={stop:function(){return a(r.a,2)},catch:function(){return r.v},abrupt:function(t,e){return a(r.a,n[t],e)},delegateYield:function(t,e,n){return o.resultName=e,a(r.d,u(t),n)},finish:function(t){return a(r.f,t)}},a=function(t,e,n){r.p=o.prev,r.n=o.next;try{return t(e,n)}finally{o.next=r.n}}),o.resultName&&(o[o.resultName]=r.v,o.resultName=void 0),o.sent=r.v,o.next=r.n;try{return t.call(this,o)}finally{r.p=o.prev,r.n=o.next}}}return(c=function(){return{wrap:function(t,e,n,r){return o.w(i(t),e,n,r&&r.reverse())},isGeneratorFunction:a,mark:o.m,awrap:function(t,e){return new d(t,e)},AsyncIterator:f,async:function(t,e,n,r,o){return(a(e)?l:function(t,e,n,r,o){var a=l(t,e,n,r,o);return a.next().then(function(t){return t.done?t.value:a.next()})})(i(t),e,n,r,o)},keys:s,values:u}})()}function u(t){if(null!=t){var e=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],n=0;if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return{value:(t=t&&n>=t.length?void 0:t)&&t[n++],done:!t}}}}throw new TypeError(r(t)+" is not iterable")}function s(t){var e,n=Object(t),r=[];for(e in n)r.unshift(e);return function t(){for(;r.length;)if((e=r.pop())in n)return t.value=e,t.done=!1,t;return t.done=!0,t}}function l(t,e,n,r,o){return new f(p().w(t,e,n,r),o||Promise)}function f(c,u){var o;this.next||(b(f.prototype),b(f.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),b(this,"_invoke",function(n,t,r){function e(){return new u(function(t,e){!function e(t,n,r,o){try{var a=c[t](n),i=a.value;return i instanceof d?u.resolve(i.v).then(function(t){e("next",t,r,o)},function(t){e("throw",t,r,o)}):u.resolve(i).then(function(t){a.value=t,r(a)},function(t){return e("throw",t,r,o)})}catch(t){o(t)}}(n,r,t,e)})}return o=o?o.then(e,e):e()},!0)}function p(){var h,t="function"==typeof Symbol?Symbol:{},e=t.iterator||"@@iterator",n=t.toStringTag||"@@toStringTag";function r(t,e,n,r){var o,a,i,c,u,s,l,f,p,e=e&&e.prototype instanceof m?e:m,e=Object.create(e.prototype);return b(e,"_invoke",(o=t,a=n,l=r||[],f=!1,p={p:s=0,n:0,v:h,a:d,f:d.bind(h,4),d:function(t,e){return i=t,c=0,u=h,p.n=e,y}},function(t,e,n){if(1<s)throw TypeError("Generator is already running");for(f&&1===e&&d(e,n),c=e,u=n;(v=c<2?h:u)||!f;){i||(c?c<3?(1<c&&(p.n=-1),d(c,u)):p.n=u:p.v=u);try{if(s=2,i){if(v=i[t=c?t:"next"]){if(!(v=v.call(i,u)))throw TypeError("iterator result is not an object");if(!v.done)return v;u=v.value,c<2&&(c=0)}else 1===c&&(v=i.return)&&v.call(i),c<2&&(u=TypeError("The iterator does not provide a '"+t+"' method"),c=1);i=h}else if((v=(f=p.n<0)?u:o.call(a,p))!==y)break}catch(t){i=h,c=1,u=t}finally{s=1}}return{value:v,done:f}}),!0),e;function d(t,e){for(c=t,u=e,v=0;!f&&s&&!n&&v<l.length;v++){var n,r=l[v],o=p.p,a=r[2];3<t?(n=a===e)&&(u=r[(c=r[4])?5:c=3],r[4]=r[5]=h):r[0]<=o&&((n=t<2&&o<r[1])?(c=0,p.v=e,p.n=r[1]):o<a&&(n=t<3||r[0]>e||a<e)&&(r[4]=t,r[5]=e,p.n=a,c=0))}if(n||1<t)return y;throw f=!0,e}}var y={};function m(){}function o(){}function a(){}var v=Object.getPrototypeOf,t=[][e]?v(v([][e]())):(b(v={},e,function(){return this}),v),i=a.prototype=m.prototype=Object.create(t);function c(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,a):(t.__proto__=a,b(t,n,"GeneratorFunction")),t.prototype=Object.create(i),t}return b(i,"constructor",o.prototype=a),b(a,"constructor",o),b(a,n,o.displayName="GeneratorFunction"),b(i),b(i,n,"Generator"),b(i,e,function(){return this}),b(i,"toString",function(){return"[object Generator]"}),(p=function(){return{w:r,m:c}})()}function b(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}(b=function(t,e,n,r){e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:((r=function(e,n){b(t,e,function(t){return this._invoke(e,n,t)})})("next",0),r("throw",1),r("return",2))})(t,e,n,r)}function d(t,e){this.v=t,this.k=e}function h(t,e,n,r,o,a,i){try{var c=t[a](i),u=c.value}catch(t){return n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}function y(c){return function(){var t=this,i=arguments;return new Promise(function(e,n){var r=c.apply(t,i);function o(t){h(r,e,n,o,a,"next",t)}function a(t){h(r,e,n,o,a,"throw",t)}o(void 0)})}}var m,v,g,w,S;n.speiService={getProcessedTransactions:(S=y(c().mark(function t(e,n){return c().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.speiRepository.getTransactions(e,n);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t)})),function(t,e){return S.apply(this,arguments)}),getTransactions:(w=y(c().mark(function t(e){return c().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.speiRepository.getTransactions(e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t)})),function(t){return w.apply(this,arguments)}),getTransactionDetails:(g=y(c().mark(function t(e){return c().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.speiRepository.getTransactionById(e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t)})),function(t){return g.apply(this,arguments)}),sortTransactions:function(t,n,r){t=a(t);return t.sort(function(t,e){t=t[n],e=e[n];return"string"==typeof t&&(t=t.toLowerCase(),e=e.toLowerCase()),t<e?"asc"===r?-1:1:e<t?"asc"===r?1:-1:0}),t},calculateTotalCompletedAmount:(v=y(c().mark(function t(){var e;return c().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getProcessedTransactions();case 2:return e=t.sent,t.abrupt("return",e.filter(function(t){return t.isSuccessful()}).reduce(function(t,e){return t+e.amount},0));case 4:case"end":return t.stop()}},t,this)})),function(){return v.apply(this,arguments)}),exportTransactionsToCsv:(m=y(c().mark(function t(e){return c().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this._convertToCsv(e));case 1:case"end":return t.stop()}},t,this)})),function(t){return m.apply(this,arguments)}),_convertToCsv:function(t){var n,r;return t&&0!==t.length?(n=["id","trackingKey","beneficiaryName","amount","createdAt","status","payerName","payerRfc","payerClabe","payerInstitution","beneficiaryRfc","beneficiaryClabe","paymentConcept","numericReference","transactionType","customerTransactionId","customerId","createdAt","updatedAt"],r=["ID","Tracking Key","Beneficiary Name","Amount","Date","Status","Payer Name","Payer RFC","Payer CLABE","Payer Institution","Beneficiary RFC","Beneficiary CLABE","Payment Concept","Numeric Reference","Transaction Type","Customer Transaction ID","Customer ID","Created At","Updated At"].join(",")+"\n",t.forEach(function(e){var t=n.map(function(t){t=e[t];return t instanceof Date?t=t.toLocaleString():"number"==typeof t?t=t.toFixed(2):null==t?t="":((t=String(t).replace(/"/g,'""')).includes(",")||t.includes("\n"))&&(t='"'.concat(t,'"')),t});r+=t.join(",")+"\n"}),r):"No data to export."}}},{"../data/spei.repository.js":32}],34:[function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var f=t("./domain/spei.service.js"),p=t("./ui/spei.ui.js"),d=t("../../core/utils/file.utils");function h(t){return function(t){if(Array.isArray(t))return o(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){{var n;if(t)return"string"==typeof t?o(t,e):"Map"===(n="Object"===(n={}.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:n)||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function y(){var o=b(),t=o.m(y),e=(Object.getPrototypeOf?Object.getPrototypeOf(t):t.__proto__).constructor;function a(t){t="function"==typeof t&&t.constructor;return!!t&&(t===e||"GeneratorFunction"===(t.displayName||t.name))}var n={throw:1,return:2,break:3,continue:3};function i(t){var o,a;return function(r){o||(o={stop:function(){return a(r.a,2)},catch:function(){return r.v},abrupt:function(t,e){return a(r.a,n[t],e)},delegateYield:function(t,e,n){return o.resultName=e,a(r.d,c(t),n)},finish:function(t){return a(r.f,t)}},a=function(t,e,n){r.p=o.prev,r.n=o.next;try{return t(e,n)}finally{o.next=r.n}}),o.resultName&&(o[o.resultName]=r.v,o.resultName=void 0),o.sent=r.v,o.next=r.n;try{return t.call(this,o)}finally{r.p=o.prev,r.n=o.next}}}return(y=function(){return{wrap:function(t,e,n,r){return o.w(i(t),e,n,r&&r.reverse())},isGeneratorFunction:a,mark:o.m,awrap:function(t,e){return new m(t,e)},AsyncIterator:l,async:function(t,e,n,r,o){return(a(e)?s:function(t,e,n,r,o){var a=s(t,e,n,r,o);return a.next().then(function(t){return t.done?t.value:a.next()})})(i(t),e,n,r,o)},keys:u,values:c}})()}function c(t){if(null!=t){var e=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],n=0;if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return{value:(t=t&&n>=t.length?void 0:t)&&t[n++],done:!t}}}}throw new TypeError(r(t)+" is not iterable")}function u(t){var e,n=Object(t),r=[];for(e in n)r.unshift(e);return function t(){for(;r.length;)if((e=r.pop())in n)return t.value=e,t.done=!1,t;return t.done=!0,t}}function s(t,e,n,r,o){return new l(b().w(t,e,n,r),o||Promise)}function l(c,u){var o;this.next||(g(l.prototype),g(l.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),g(this,"_invoke",function(n,t,r){function e(){return new u(function(t,e){!function e(t,n,r,o){try{var a=c[t](n),i=a.value;return i instanceof m?u.resolve(i.v).then(function(t){e("next",t,r,o)},function(t){e("throw",t,r,o)}):u.resolve(i).then(function(t){a.value=t,r(a)},function(t){return e("throw",t,r,o)})}catch(t){o(t)}}(n,r,t,e)})}return o=o?o.then(e,e):e()},!0)}function b(){var h,t="function"==typeof Symbol?Symbol:{},e=t.iterator||"@@iterator",n=t.toStringTag||"@@toStringTag";function r(t,e,n,r){var o,a,i,c,u,s,l,f,p,e=e&&e.prototype instanceof m?e:m,e=Object.create(e.prototype);return g(e,"_invoke",(o=t,a=n,l=r||[],f=!1,p={p:s=0,n:0,v:h,a:d,f:d.bind(h,4),d:function(t,e){return i=t,c=0,u=h,p.n=e,y}},function(t,e,n){if(1<s)throw TypeError("Generator is already running");for(f&&1===e&&d(e,n),c=e,u=n;(v=c<2?h:u)||!f;){i||(c?c<3?(1<c&&(p.n=-1),d(c,u)):p.n=u:p.v=u);try{if(s=2,i){if(v=i[t=c?t:"next"]){if(!(v=v.call(i,u)))throw TypeError("iterator result is not an object");if(!v.done)return v;u=v.value,c<2&&(c=0)}else 1===c&&(v=i.return)&&v.call(i),c<2&&(u=TypeError("The iterator does not provide a '"+t+"' method"),c=1);i=h}else if((v=(f=p.n<0)?u:o.call(a,p))!==y)break}catch(t){i=h,c=1,u=t}finally{s=1}}return{value:v,done:f}}),!0),e;function d(t,e){for(c=t,u=e,v=0;!f&&s&&!n&&v<l.length;v++){var n,r=l[v],o=p.p,a=r[2];3<t?(n=a===e)&&(u=r[(c=r[4])?5:c=3],r[4]=r[5]=h):r[0]<=o&&((n=t<2&&o<r[1])?(c=0,p.v=e,p.n=r[1]):o<a&&(n=t<3||r[0]>e||a<e)&&(r[4]=t,r[5]=e,p.n=a,c=0))}if(n||1<t)return y;throw f=!0,e}}var y={};function m(){}function o(){}function a(){}var v=Object.getPrototypeOf,t=[][e]?v(v([][e]())):(g(v={},e,function(){return this}),v),i=a.prototype=m.prototype=Object.create(t);function c(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,a):(t.__proto__=a,g(t,n,"GeneratorFunction")),t.prototype=Object.create(i),t}return g(i,"constructor",o.prototype=a),g(a,"constructor",o),g(a,n,o.displayName="GeneratorFunction"),g(i),g(i,n,"Generator"),g(i,e,function(){return this}),g(i,"toString",function(){return"[object Generator]"}),(b=function(){return{w:r,m:c}})()}function g(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}(g=function(t,e,n,r){e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:((r=function(e,n){g(t,e,function(t){return this._invoke(e,n,t)})})("next",0),r("throw",1),r("return",2))})(t,e,n,r)}function m(t,e){this.v=t,this.k=e}function v(t,e,n,r,o,a,i){try{var c=t[a](i),u=c.value}catch(t){return n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}function w(c){return function(){var t=this,i=arguments;return new Promise(function(e,n){var r=c.apply(t,i);function o(t){v(r,e,n,o,a,"next",t)}function a(t){v(r,e,n,o,a,"throw",t)}o(void 0)})}}$(document).ready(function(){var r,n,o,a,i,e,c,u,t,s,l;console.log("Loaded this spei module."),0<$("#spei-home-widget-container").length&&(t=function(){var t=w(y().mark(function t(){var e;return y().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return p.speiUI.showLoader(),t.prev=1,e={page:0,pageSize:4},t.next=5,f.speiService.getTransactions(e);case 5:e=t.sent,p.speiUI.renderTransactions(e),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),console.error("Error loading recent transactions:",t.t0);case 12:return t.prev=12,p.speiUI.hideLoader(),t.finish(12);case 15:case"end":return t.stop()}},t,null,[[1,9,12,15]])}));return function(){return t.apply(this,arguments)}}(),$("#spei-transactions-tbody").on("click","tr.clickable-row",function(){var t=$(this).data("id");t&&(window.location.href="/spei/spei-transaction-details.html?id=".concat(t))}),t()),0<$("#spei-transactions-page").length&&(r=function(){var t=f.speiService.sortTransactions(o,e,c);p.speiUI.renderTransactions(t,!1),p.speiUI.updateSortIcons(e,c)},n=function(){var t=w(y().mark(function t(){var e,n=arguments;return y().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=0<n.length&&void 0!==n[0]&&n[0],p.speiUI.showLoader(),e&&(a=0,o=[]),t.prev=3,e={page:a,pageSize:i,filters:u},t.next=7,f.speiService.getTransactions(e);case 7:e=t.sent,o.push.apply(o,h(e)),r(),p.speiUI.updateLoadMoreButton(e.length===i),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(3),console.error("Error loading more transactions:",t.t0);case 16:return t.prev=16,p.speiUI.hideLoader(),t.finish(16);case 19:case"end":return t.stop()}},t,null,[[3,13,16,19]])}));return function(){return t.apply(this,arguments)}}(),o=[],a=0,i=10,e="createdAt",c="desc",u={},$("#spei-apply-filter-button").on("click",function(){var t=$("#spei-new-filter-field").val(),e=$("#spei-new-filter-value").val();e&&(u[t]=e,p.speiUI.renderFilterTags(u),p.speiUI.clearFilterInputs(),n(!0))}),$("#spei-filter-tags-container").on("click",".remove-filter",function(t){t.preventDefault();t=$(this).data("filter-key");delete u[t],p.speiUI.renderFilterTags(u),n(!0)}),$("th.sortable").on("click",function(){var t=$(this).data("sort");c=e===t?"asc"===c?"desc":"asc":(e=t,"asc"),r()}),$("#spei-load-more").on("click",function(){a++,n()}),$("#spei-transactions-tbody").on("click","tr.clickable-row",function(){var t=$(this).data("id");t&&(window.location.href="/spei/spei-transaction-details.html?id=".concat(t))}),$("#spei-export-csv-button").on("click",w(y().mark(function t(){var e,n,r;return y().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return(e=$(this)).prop("disabled",!0).html('<span class="spinner-border spinner-border-sm me-1" role="status" aria-hidden="true"></span> Exporting...'),t.prev=2,t.next=5,f.speiService.exportTransactionsToCsv(o);case 5:n=t.sent,r="spei_transactions_".concat((new Date).toISOString().split("T")[0],".csv"),d.fileUtils.downloadFile(n,r,"text/csv"),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(2),console.error("Error during CSV export:",t.t0),alert("Failed to export data. Please try again.");case 14:return t.prev=14,e.prop("disabled",!1).html('<i class="uil uil-download-alt me-1"></i> Export to CSV'),t.finish(14);case 17:case"end":return t.stop()}},t,this,[[2,10,14,17]])}))),n()),0<$("#spei-transaction-details-page").length&&(t=function(){var t=w(y().mark(function t(){var e,n;return y().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,f.speiService.getTransactionDetails(s);case 3:(n=t.sent)?(e=n.transaction,n=n.webhooks,l=n,p.speiUI.renderTransactionDetails(e),p.speiUI.renderWebhooksTable(n)):$("#spei-transaction-details-page").html('<div class="alert alert-danger">Transaction not found or an error occurred.</div>'),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),console.error("Error loading transaction details:",t.t0),$("#spei-transaction-details-page").html('<div class="alert alert-danger">An unexpected error occurred while loading details.</div>');case 11:case"end":return t.stop()}},t,null,[[0,7]])}));return function(){return t.apply(this,arguments)}}(),s=new URLSearchParams(window.location.search).get("id"),l=[],s?($("#webhooks-tbody").on("click",".webhook-row",function(){var e=$(this).data("id"),t=l.find(function(t){return t.id===e});t&&p.speiUI.showWebhookDetailsModal(t)}),t()):window.location.href="/spei/spei-transactions.html")})},{"../../core/utils/file.utils":5,"./domain/spei.service.js":33,"./ui/spei.ui.js":37}],35:[function(t,e,n){"use strict";function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){t=function(t,e){if("object"!=o(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);n=n.call(t,e||"default");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"==o(t)?t:t+""}(r.key),r)}}Object.defineProperty(n,"__esModule",{value:!0}),n.SpeiTransaction=void 0;n.SpeiTransaction=function(){function g(t){var e=t.id,n=t.date_of_transaction,r=t.tracking_key,o=t.amount,a=t.status,i=t.payer_name,c=t.payer_rfc,u=t.payer_clabe,s=t.payer_institution,l=t.beneficiary_name,f=t.beneficiary_rfc,p=t.beneficiary_clabe,d=t.payment_concept,h=t.numeric_reference,y=t.transaction_type,m=t.customer_transaction_id,v=t.customer_id,b=t.created_at,t=t.updated_at;if(!(this instanceof g))throw new TypeError("Cannot call a class as a function");this.id=e,this.dateOfTransaction=n,this.trackingKey=r,this.amount=parseFloat(o),this.status=a,this.payerName=i,this.payerRfc=c,this.payerClabe=u,this.payerInstitution=s,this.beneficiaryName=l,this.beneficiaryRfc=f,this.beneficiaryClabe=p,this.paymentConcept=d,this.numericReference=h,this.transactionType=y,this.customerTransactionId=m,this.customerId=v,this.createdAt=new Date(b),this.updatedAt=new Date(t)}return t=g,(e=[{key:"isSuccessful",value:function(){return"SUCCESS"===this.status}},{key:"getFormattedAmount",value:function(){return isNaN(this.amount)?"$0.00":"$".concat(this.amount.toFixed(2))}},{key:"getDisplayStatus",value:function(){switch(this.status){case"SUCCESS":return{text:"Completed",colorClass:"success"};case"PENDING":return{text:"Pending",colorClass:"warning"};case"FAILED":return{text:"Failed",colorClass:"danger"};case"RETURNED":return{text:"Returned",colorClass:"info"};default:return{text:this.status,colorClass:"secondary"}}}}])&&r(t.prototype,e),n&&r(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n}()},{}],36:[function(t,e,n){"use strict";function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){t=function(t,e){if("object"!=o(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);n=n.call(t,e||"default");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(t,"string");return"symbol"==o(t)?t:t+""}(r.key),r)}}Object.defineProperty(n,"__esModule",{value:!0}),n.WebhookNotification=void 0;n.WebhookNotification=function(){function w(t){var e=t.id,n=t.request_id,r=t.attempts,o=t.first_sent_at,a=t.status,i=t.scheduled_for_sending_at,c=t.event_type,u=t.event_type_description,s=t.notification_code,l=t.transaction_id,f=t.detail_id,p=t.detail_code,d=t.detail_name,h=t.detail_status,y=t.detail_failed_reason,m=t.detail_failed_message,v=t.detail_amount,b=t.metadata,g=t.created_at,t=t.updated_at;if(!(this instanceof w))throw new TypeError("Cannot call a class as a function");this.id=e,this.requestId=n,this.attempts=r,this.firstSentAt=o?new Date(o):null,this.status=a,this.scheduledForSendingAt=i?new Date(i):null,this.eventType=c,this.eventTypeDescription=u,this.notificationCode=s,this.transactionId=l,this.detailId=f,this.detailCode=p,this.detailName=d,this.detailStatus=h,this.detailFailedReason=y,this.detailFailedMessage=m,this.detailAmount=v;try{this.metadata=b?JSON.parse(b):null}catch(t){this.metadata={raw:b}}this.createdAt=new Date(g),this.updatedAt=new Date(t)}return t=w,(e=[{key:"getDisplayStatus",value:function(){return 1===this.status?{text:"Sent",colorClass:"success"}:{text:"Pending",colorClass:"warning"}}}])&&r(t.prototype,e),n&&r(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n}()},{}],37:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.speiUI=void 0;t("../models/spei-transaction.model.js"),n.speiUI={elements:{tableBody:"#spei-transactions-tbody",loader:"#spei-table-loader",loadMoreButton:"#spei-load-more",sortableHeaders:"th.sortable",filterTagsContainer:"#spei-filter-tags-container",newFilterField:"#spei-new-filter-field",newFilterValue:"#spei-new-filter-value"},showLoader:function(){$(this.elements.loader).show()},hideLoader:function(){$(this.elements.loader).hide()},renderTransactions:function(t){var e=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=$(this.elements.tableBody);e||n.empty(),0!==t.length||e?t.forEach(function(t){var e=t.getDisplayStatus(),t='\n                <tr class="clickable-row" data-id="'.concat(t.id,'" style="cursor: pointer;">\n                  <td><span class="font-monospace">').concat(t.id,'</span></td>\n                  <td><span class="font-monospace">').concat(t.trackingKey,"</span></td>\n                  <td>").concat(t.beneficiaryClabe,"</td>\n                  <td>").concat(t.getFormattedAmount(),"</td>\n                  <td>").concat(t.createdAt.toLocaleDateString(),'</td>\n                  <td><span class="badge bg-').concat(e.colorClass,'">').concat(e.text,"</span></td>\n                </tr>\n            ");n.append(t)}):this.renderEmptyState()},renderFilterTags:function(t){var e,n,r=$(this.elements.filterTagsContainer);for(e in r.empty(),t)t[e]&&(n=e.replace("_"," ").replace(/\b\w/g,function(t){return t.toUpperCase()}),n='\n                    <span class="badge bg-secondary me-1 fs-6">\n                        '.concat(n,": ").concat(t[e],'\n                        <a href="#" class="text-white ms-1 remove-filter" data-filter-key="').concat(e,'">×</a>\n                    </span>\n                '),r.append(n))},clearFilterInputs:function(){$(this.elements.newFilterValue).val("")},updateLoadMoreButton:function(t){var e=$(this.elements.loadMoreButton);t?e.show():e.hide()},renderEmptyState:function(){$(this.elements.tableBody).html('\n            <tr>\n                <td colspan="5" class="text-center p-4">\n                    <p class="mb-0">No SPEI transactions found.</p>\n                </td>\n            </tr>\n        ')},updateSortIcons:function(n,r){$(this.elements.sortableHeaders).each(function(){var t=$(this),e=t.find("i");e.removeClass("uil-sort-amount-up uil-sort-amount-down").addClass("uil-sort"),t.data("sort")===n&&("asc"===r?e.removeClass("uil-sort").addClass("uil-sort-amount-up"):e.removeClass("uil-sort").addClass("uil-sort-amount-down"))})},renderTransactionDetails:function(t){var e,n,r;t&&(r=t.getDisplayStatus(),(e=function(t,e){$(t).text(e).removeClass("placeholder-glow").empty().text(e)})("#payer-name",t.payerName),e("#payer-rfc",t.payerRfc),e("#payer-clabe",t.payerClabe),e("#payer-institution",t.payerInstitution),e("#beneficiary-name",t.beneficiaryName),e("#beneficiary-rfc",t.beneficiaryRfc),e("#beneficiary-clabe",t.beneficiaryClabe),e("#details-id",t.id),e("#details-tracking-key",t.trackingKey),e("#details-type",t.transactionType),e("#details-amount",t.getFormattedAmount()),n="#details-status",r='<span class="badge bg-'.concat(r.colorClass,'">').concat(r.text,"</span>"),$(n).html(r).removeClass("placeholder-glow"),e("#details-payment-concept",t.paymentConcept),e("#details-numeric-reference",t.numericReference),e("#details-customer-tx-id",t.customerTransactionId),e("#details-customer-id",t.customerId),e("#details-created-at",t.createdAt.toLocaleString()),e("#details-updated-at",t.updatedAt.toLocaleString()))},renderWebhooksTable:function(t){var n=$("#webhooks-tbody");n.empty(),t&&0!==t.length?t.forEach(function(t){var e=t.getDisplayStatus(),e='\n                <tr class="webhook-row" data-id="'.concat(t.id,'" style="cursor: pointer;">\n                    <td>').concat(t.id,"</td>\n                    <td>").concat(t.eventTypeDescription,'</td>\n                    <td><span class="badge bg-').concat(e.colorClass,'">').concat(e.text,"</span></td>\n                    <td>").concat(t.attempts,"</td>\n                    <td>").concat(t.firstSentAt?t.firstSentAt.toLocaleString():"N/A","</td>\n                </tr>\n            ");n.append(e)}):n.html('<tr><td colspan="5" class="text-center">No webhooks found for this transaction.</td></tr>')},showWebhookDetailsModal:function(t){t&&($("#modal-request-id").text(t.requestId||"N/A"),$("#modal-notification-code").text(t.notificationCode||"N/A"),$("#modal-detail-code").text(t.detailCode||"N/A"),$("#modal-failed-reason").text(t.detailFailedReason||"N/A"),$("#modal-failed-message").text(t.detailFailedMessage||"N/A"),t=t.metadata?JSON.stringify(t.metadata,null,2):"No metadata.",$("#modal-metadata").text(t),new bootstrap.Modal(document.getElementById("webhook-details-modal")).show())}}},{"../models/spei-transaction.model.js":35}]},{},[6]);
//# sourceMappingURL=bundle.min.js.map
